<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Selection, 2024 - Jan Robert Leegte</title><style>html,body{width:100vw;height:100vh}body{overflow:hidden}svg{width:100vw;height:100vh;position:absolute;inset:0}</style><meta http-equiv="X-UA-Compatible" content="IE=9"><script>!function(){let t;function e(t){return t&&t.__esModule?t.default:t}function i(t,{strict:e=!0}={}){return!!t&&"string"==typeof t&&(e?/^0x[0-9a-fA-F]*$/.test(t):t.startsWith("0x"))}function n(t){return i(t,{strict:!1})?Math.ceil((t.length-2)/2):t.length}let r="2.21.2",o={getDocsUrl:({docsBaseUrl:t,docsPath:e="",docsSlug:i})=>e?`${t??"https://viem.sh"}${e}${i?`#${i}`:""}`:void 0,version:r};class s extends Error{constructor(t,e={}){let i=e.cause instanceof s?e.cause.details:e.cause?.message?e.cause.message:e.details,n=e.cause instanceof s&&e.cause.docsPath||e.docsPath,l=o.getDocsUrl?.({...e,docsPath:n});super([t||"An error occurred.","",...e.metaMessages?[...e.metaMessages,""]:[],...l?[`Docs: ${l}`]:[],...i?[`Details: ${i}`]:[],...o.version?[`Version: ${o.version}`]:[]].join("\n"),e.cause?{cause:e.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=i,this.docsPath=n,this.metaMessages=e.metaMessages,this.name=e.name??this.name,this.shortMessage=t,this.version=r}walk(t){return function t(e,i){return i?.(e)?e:e&&"object"==typeof e&&"cause"in e?t(e.cause,i):i?null:e}(this,t)}}class l extends s{constructor({expectedLength:t,givenLength:e}){super(`ABI encoding params/values length mismatch.
Expected length (params): ${t}
Given length (values): ${e}`,{name:"AbiEncodingLengthMismatchError"})}}class p extends s{constructor({expectedSize:t,givenSize:e}){super(`Expected bytes${t}, got bytes${e}.`,{name:"BytesSizeMismatchError"})}}class h extends s{constructor(t){super(`Type "${t}" is not supported for packed encoding.`,{name:"UnsupportedPackedAbiType"})}}class u extends s{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class a extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}set(t,e){return super.set(t,e),this.maxSize&&this.size>this.maxSize&&this.delete(this.keys().next().value),this}}class f extends s{constructor({size:t,targetSize:e,type:i}){super(`${i.charAt(0).toUpperCase()}${i.slice(1).toLowerCase()} size (${t}) exceeds padding size (${e}).`,{name:"SizeExceedsPaddingSizeError"})}}function d(t,{dir:e,size:i=32}={}){return"string"==typeof t?function(t,{dir:e,size:i=32}={}){if(null===i)return t;let n=t.replace("0x","");if(n.length>2*i)throw new f({size:Math.ceil(n.length/2),targetSize:i,type:"hex"});return`0x${n["right"===e?"padEnd":"padStart"](2*i,"0")}`}(t,{dir:e,size:i}):function(t,{dir:e,size:i=32}={}){if(null===i)return t;if(t.length>i)throw new f({size:t.length,targetSize:i,type:"bytes"});let n=new Uint8Array(i);for(let r=0;r<i;r++){let o="right"===e;n[o?r:i-r-1]=t[o?r:t.length-r-1]}return n}(t,{dir:e,size:i})}class P extends s{constructor({max:t,min:e,signed:i,size:n,value:r}){super(`Number "${r}" is not in safe ${n?`${8*n}-bit ${i?"signed":"unsigned"} `:""}integer range ${t?`(${e} to ${t})`:`(above ${e})`}`,{name:"IntegerOutOfRangeError"})}}class c extends s{constructor({givenSize:t,maxSize:e}){super(`Size cannot exceed ${e} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}function y(t,{size:e}){if(n(t)>e)throw new c({givenSize:n(t),maxSize:e})}let m=/*#__PURE__*/Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function v(t,e={}){let i=`0x${Number(t)}`;return"number"==typeof e.size?(y(i,{size:e.size}),d(i,{size:e.size})):i}function x(t,e={}){let i="";for(let e=0;e<t.length;e++)i+=m[t[e]];let n=`0x${i}`;return"number"==typeof e.size?(y(n,{size:e.size}),d(n,{dir:"right",size:e.size})):n}function I(t,e={}){let i;let{signed:n,size:r}=e,o=BigInt(t);r?i=n?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"==typeof t&&(i=BigInt(Number.MAX_SAFE_INTEGER));let s="bigint"==typeof i&&n?-i-1n:0;if(i&&o>i||o<s){let e="bigint"==typeof t?"n":"";throw new P({max:i?`${i}${e}`:void 0,min:`${s}${e}`,signed:n,size:r,value:`${t}${e}`})}let l=`0x${(n&&o<0?(1n<<BigInt(8*r))+BigInt(o):o).toString(16)}`;return r?d(l,{size:r}):l}let g=/*#__PURE__*/new TextEncoder;function C(t,e={}){return x(g.encode(t),e)}let _=/*#__PURE__*/new TextEncoder,L={zero:48,nine:57,A:65,F:70,a:97,f:102};function E(t){return t>=L.zero&&t<=L.nine?t-L.zero:t>=L.A&&t<=L.F?t-(L.A-10):t>=L.a&&t<=L.f?t-(L.a-10):void 0}function T(t,e={}){let i=t;e.size&&(y(i,{size:e.size}),i=d(i,{dir:"right",size:e.size}));let n=i.slice(2);n.length%2&&(n=`0${n}`);let r=n.length/2,o=new Uint8Array(r);for(let t=0,e=0;t<r;t++){let i=E(n.charCodeAt(e++)),r=E(n.charCodeAt(e++));if(void 0===i||void 0===r)throw new s(`Invalid byte sequence ("${n[e-2]}${n[e-1]}" in "${n}").`);o[t]=16*i+r}return o}function X(t,e={}){let i=_.encode(t);return"number"==typeof e.size?(y(i,{size:e.size}),d(i,{dir:"right",size:e.size})):i}var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.shake256=Y.shake128=Y.keccak_512=Y.keccak_384=Y.keccak_256=Y.keccak_224=Y.sha3_512=Y.sha3_384=Y.sha3_256=Y.sha3_224=Y.Keccak=Y.keccakP=void 0;var O={};function N(t){if(!Number.isSafeInteger(t)||t<0)throw Error(`Wrong positive integer: ${t}`)}function S(t){if("boolean"!=typeof t)throw Error(`Expected boolean, not ${t}`)}function b(t,...e){if(!(t instanceof Uint8Array))throw Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function A(t){if("function"!=typeof t||"function"!=typeof t.create)throw Error("Hash should be wrapped by utils.wrapConstructor");N(t.outputLen),N(t.blockLen)}function B(t,e=!0){if(t.destroyed)throw Error("Hash instance has been destroyed");if(e&&t.finished)throw Error("Hash#digest() has already been called")}function w(t,e){b(t);let i=e.outputLen;if(t.length<i)throw Error(`digestInto() expects output buffer of length at least ${i}`)}Object.defineProperty(O,"__esModule",{value:!0}),O.output=O.exists=O.hash=O.bytes=O.bool=O.number=void 0,O.number=N,O.bool=S,O.bytes=b,O.hash=A,O.exists=B,O.output=w,O.default={number:N,bool:S,bytes:b,hash:A,exists:B,output:w};var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.add5L=D.add5H=D.add4H=D.add4L=D.add3H=D.add3L=D.add=D.rotlBL=D.rotlBH=D.rotlSL=D.rotlSH=D.rotr32L=D.rotr32H=D.rotrBL=D.rotrBH=D.rotrSL=D.rotrSH=D.shrSL=D.shrSH=D.toBig=D.split=D.fromBig=void 0;let M=/* @__PURE__ */BigInt(4294967296-1),R=/* @__PURE__ */BigInt(32);function F(t,e=!1){return e?{h:Number(t&M),l:Number(t>>R&M)}:{h:0|Number(t>>R&M),l:0|Number(t&M)}}function z(t,e=!1){let i=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let r=0;r<t.length;r++){let{h:o,l:s}=F(t[r],e);[i[r],n[r]]=[o,s]}return[i,n]}D.fromBig=F,D.split=z;let W=(t,e)=>BigInt(t>>>0)<<R|BigInt(e>>>0);D.toBig=W;let k=(t,e,i)=>t>>>i;D.shrSH=k;let q=(t,e,i)=>t<<32-i|e>>>i;D.shrSL=q;let H=(t,e,i)=>t>>>i|e<<32-i;D.rotrSH=H;let Z=(t,e,i)=>t<<32-i|e>>>i;D.rotrSL=Z;let U=(t,e,i)=>t<<64-i|e>>>i-32;D.rotrBH=U;let $=(t,e,i)=>t>>>i-32|e<<64-i;D.rotrBL=$;let j=(t,e)=>e;D.rotr32H=j;let J=(t,e)=>t;D.rotr32L=J;let V=(t,e,i)=>t<<i|e>>>32-i;D.rotlSH=V;let G=(t,e,i)=>e<<i|t>>>32-i;D.rotlSL=G;let K=(t,e,i)=>e<<i-32|t>>>64-i;D.rotlBH=K;let Q=(t,e,i)=>t<<i-32|e>>>64-i;function tt(t,e,i,n){let r=(e>>>0)+(n>>>0);return{h:t+i+(r/4294967296|0)|0,l:0|r}}D.rotlBL=Q,D.add=tt;let te=(t,e,i)=>(t>>>0)+(e>>>0)+(i>>>0);D.add3L=te;let ti=(t,e,i,n)=>e+i+n+(t/4294967296|0)|0;D.add3H=ti;let tn=(t,e,i,n)=>(t>>>0)+(e>>>0)+(i>>>0)+(n>>>0);D.add4L=tn;let tr=(t,e,i,n,r)=>e+i+n+r+(t/4294967296|0)|0;D.add4H=tr;let to=(t,e,i,n,r)=>(t>>>0)+(e>>>0)+(i>>>0)+(n>>>0)+(r>>>0);D.add5L=to;let ts=(t,e,i,n,r,o)=>e+i+n+r+o+(t/4294967296|0)|0;D.add5H=ts,D.default={fromBig:F,split:z,toBig:W,shrSH:k,shrSL:q,rotrSH:H,rotrSL:Z,rotrBH:U,rotrBL:$,rotr32H:j,rotr32L:J,rotlSH:V,rotlSL:G,rotlBH:K,rotlBL:Q,add:tt,add3L:te,add3H:ti,add4L:tn,add4H:tr,add5H:ts,add5L:to};var tl={};/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(tl,"__esModule",{value:!0}),tl.randomBytes=tl.wrapXOFConstructorWithOpts=tl.wrapConstructorWithOpts=tl.wrapConstructor=tl.checkOpts=tl.Hash=tl.concatBytes=tl.toBytes=tl.utf8ToBytes=tl.asyncLoop=tl.nextTick=tl.hexToBytes=tl.bytesToHex=tl.isLE=tl.rotr=tl.createView=tl.u32=tl.u8=void 0;var tp={};Object.defineProperty(tp,"__esModule",{value:!0}),tp.crypto=void 0,tp.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;let th=t=>t instanceof Uint8Array;if(tl.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength),tl.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4)),tl.createView=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),tl.rotr=(t,e)=>t<<32-e|t>>>e,tl.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!tl.isLE)throw Error("Non little-endian hardware is not supported");let tu=/* @__PURE__ */Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));tl.bytesToHex=function(t){if(!th(t))throw Error("Uint8Array expected");let e="";for(let i=0;i<t.length;i++)e+=tu[t[i]];return e},tl.hexToBytes=function(t){if("string"!=typeof t)throw Error("hex string expected, got "+typeof t);let e=t.length;if(e%2)throw Error("padded hex string expected, got unpadded hex of length "+e);let i=new Uint8Array(e/2);for(let e=0;e<i.length;e++){let n=2*e,r=Number.parseInt(t.slice(n,n+2),16);if(Number.isNaN(r)||r<0)throw Error("Invalid byte sequence");i[e]=r}return i};let ta=async()=>{};async function tf(t,e,i){let n=Date.now();for(let r=0;r<t;r++){i(r);let t=Date.now()-n;t>=0&&t<e||(await (0,tl.nextTick)(),n+=t)}}function td(t){if("string"!=typeof t)throw Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function tP(t){if("string"==typeof t&&(t=td(t)),!th(t))throw Error(`expected Uint8Array, got ${typeof t}`);return t}tl.nextTick=ta,tl.asyncLoop=tf,tl.utf8ToBytes=td,tl.toBytes=tP,tl.concatBytes=function(...t){let e=new Uint8Array(t.reduce((t,e)=>t+e.length,0)),i=0;return t.forEach(t=>{if(!th(t))throw Error("Uint8Array expected");e.set(t,i),i+=t.length}),e},tl.Hash=class{clone(){return this._cloneInto()}};let tc={}.toString;tl.checkOpts=function(t,e){if(void 0!==e&&"[object Object]"!==tc.call(e))throw Error("Options should be object or undefined");return Object.assign(t,e)},tl.wrapConstructor=function(t){let e=e=>t().update(tP(e)).digest(),i=t();return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=()=>t(),e},tl.wrapConstructorWithOpts=function(t){let e=(e,i)=>t(i).update(tP(e)).digest(),i=t({});return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=e=>t(e),e},tl.wrapXOFConstructorWithOpts=function(t){let e=(e,i)=>t(i).update(tP(e)).digest(),i=t({});return e.outputLen=i.outputLen,e.blockLen=i.blockLen,e.create=e=>t(e),e},tl.randomBytes=function(t=32){if(tp.crypto&&"function"==typeof tp.crypto.getRandomValues)return tp.crypto.getRandomValues(new Uint8Array(t));throw Error("crypto.getRandomValues must be defined")};let[ty,tm,tv]=[[],[],[]],tx=/* @__PURE__ */BigInt(0),tI=/* @__PURE__ */BigInt(1),tg=/* @__PURE__ */BigInt(2),tC=/* @__PURE__ */BigInt(7),t_=/* @__PURE__ */BigInt(256),tL=/* @__PURE__ */BigInt(113);for(let t=0,e=tI,i=1,n=0;t<24;t++){[i,n]=[n,(2*i+3*n)%5],ty.push(2*(5*n+i)),tm.push((t+1)*(t+2)/2%64);let r=tx;for(let t=0;t<7;t++)(e=(e<<tI^(e>>tC)*tL)%t_)&tg&&(r^=tI<<(tI<</* @__PURE__ */BigInt(t))-tI);tv.push(r)}let[tE,tT]=/* @__PURE__ */(0,D.split)(tv,!0),tX=(t,e,i)=>i>32?(0,D.rotlBH)(t,e,i):(0,D.rotlSH)(t,e,i),tY=(t,e,i)=>i>32?(0,D.rotlBL)(t,e,i):(0,D.rotlSL)(t,e,i);function tO(t,e=24){let i=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let e=0;e<10;e++)i[e]=t[e]^t[e+10]^t[e+20]^t[e+30]^t[e+40];for(let e=0;e<10;e+=2){let n=(e+8)%10,r=(e+2)%10,o=i[r],s=i[r+1],l=tX(o,s,1)^i[n],p=tY(o,s,1)^i[n+1];for(let i=0;i<50;i+=10)t[e+i]^=l,t[e+i+1]^=p}let e=t[2],r=t[3];for(let i=0;i<24;i++){let n=tm[i],o=tX(e,r,n),s=tY(e,r,n),l=ty[i];e=t[l],r=t[l+1],t[l]=o,t[l+1]=s}for(let e=0;e<50;e+=10){for(let n=0;n<10;n++)i[n]=t[e+n];for(let n=0;n<10;n++)t[e+n]^=~i[(n+2)%10]&i[(n+4)%10]}t[0]^=tE[n],t[1]^=tT[n]}i.fill(0)}Y.keccakP=tO;class tN extends tl.Hash{constructor(t,e,i,n=!1,r=24){if(super(),this.blockLen=t,this.suffix=e,this.outputLen=i,this.enableXOF=n,this.rounds=r,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,O.number)(i),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,tl.u32)(this.state)}keccak(){tO(this.state32,this.rounds),this.posOut=0,this.pos=0}update(t){(0,O.exists)(this);let{blockLen:e,state:i}=this,n=(t=(0,tl.toBytes)(t)).length;for(let r=0;r<n;){let o=Math.min(e-this.pos,n-r);for(let e=0;e<o;e++)i[this.pos++]^=t[r++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:e,pos:i,blockLen:n}=this;t[i]^=e,(128&e)!=0&&i===n-1&&this.keccak(),t[n-1]^=128,this.keccak()}writeInto(t){(0,O.exists)(this,!1),(0,O.bytes)(t),this.finish();let e=this.state,{blockLen:i}=this;for(let n=0,r=t.length;n<r;){this.posOut>=i&&this.keccak();let o=Math.min(i-this.posOut,r-n);t.set(e.subarray(this.posOut,this.posOut+o),n),this.posOut+=o,n+=o}return t}xofInto(t){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,O.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,O.output)(t,this),this.finished)throw Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:e,suffix:i,outputLen:n,rounds:r,enableXOF:o}=this;return t||(t=new tN(e,i,n,o,r)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=r,t.suffix=i,t.outputLen=n,t.enableXOF=o,t.destroyed=this.destroyed,t}}Y.Keccak=tN;let tS=(t,e,i)=>(0,tl.wrapConstructor)(()=>new tN(e,t,i));Y.sha3_224=tS(6,144,28),Y.sha3_256=tS(6,136,32),Y.sha3_384=tS(6,104,48),Y.sha3_512=tS(6,72,64),Y.keccak_224=tS(1,144,28),Y.keccak_256=tS(1,136,32),Y.keccak_384=tS(1,104,48),Y.keccak_512=tS(1,72,64);let tb=(t,e,i)=>(0,tl.wrapXOFConstructorWithOpts)((n={})=>new tN(e,t,void 0===n.dkLen?i:n.dkLen,!0));function tA(t,e){let n=(0,Y.keccak_256)(i(t,{strict:!1})?function(t,e={}){return"number"==typeof t||"bigint"==typeof t?T(I(t,e)):"boolean"==typeof t?function(t,e={}){let i=new Uint8Array(1);return(i[0]=Number(t),"number"==typeof e.size)?(y(i,{size:e.size}),d(i,{size:e.size})):i}(t,e):i(t)?T(t,e):X(t,e)}(t):t);return"bytes"===(e||"hex")?n:function(t,e={}){return"number"==typeof t||"bigint"==typeof t?I(t,e):"string"==typeof t?C(t,e):"boolean"==typeof t?v(t,e):x(t,e)}(n)}Y.shake128=tb(31,168,16),Y.shake256=tb(31,136,32);let tB=/*#__PURE__*/new a(8192),tw=/^0x[a-fA-F0-9]{40}$/,tD=/*#__PURE__*/new a(8192);function tM(t){return`0x${t.reduce((t,e)=>t+e.replace("0x",""),"")}`}let tR=/^(.*)\[([0-9]*)\]$/,tF=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,tz=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;var tW={};!function(){function t(t,e,i){P.biginteger_used=1,null!=t&&("number"==typeof t&&void 0===e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function e(){return new t(null,void 0,void 0)}function i(t,e){var i=E[t.charCodeAt(e)];return null==i?-1:i}function n(t){var i=e();return i.fromInt(t),i}function r(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=t>>1&&(i+=1),i}function o(t){this.m=t}function s(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function l(t,e){return t&e}function p(t,e){return t|e}function h(t,e){return t^e}function u(t,e){return t&~e}function a(){}function f(t){return t}function d(i){this.r2=e(),this.q3=e(),t.ONE.dlShiftTo(2*i.t,this.r2),this.mu=this.r2.divide(i),this.m=i}var P={version:"6.4.2.2",use_lines:!0,use_xyz:!1},c=!1;if(tW?(tW=P,c=!0):"undefined"!=typeof document?window.ClipperLib=P:self.ClipperLib=P,c)var y="chrome",m="Netscape";else y=navigator.userAgent.toString().toLowerCase(),m=navigator.appName;var v=-1!=y.indexOf("chrome")&&-1==y.indexOf("chromium")?1:0;c=-1!=y.indexOf("chromium")?1:0;var x=-1!=y.indexOf("safari")&&-1==y.indexOf("chrome")&&-1==y.indexOf("chromium")?1:0,I=-1!=y.indexOf("firefox")?1:0;y.indexOf("firefox/17"),y.indexOf("firefox/15"),y.indexOf("firefox/3");var g=-1!=y.indexOf("opera")?1:0;y.indexOf("msie 10"),y.indexOf("msie 9");var C=-1!=y.indexOf("msie 8")?1:0,_=-1!=y.indexOf("msie 7")?1:0;y=-1!=y.indexOf("msie ")?1:0,P.biginteger_used=null,"Microsoft Internet Explorer"==m?(t.prototype.am=function(t,e,i,n,r,o){var s=32767&e;for(e>>=15;0<=--o;){var l=32767&this[t],p=this[t++]>>15,h=e*l+p*s;r=((l=s*l+((32767&h)<<15)+i[n]+(1073741823&r))>>>30)+(h>>>15)+e*p+(r>>>30),i[n++]=1073741823&l}return r},m=30):"Netscape"!=m?(t.prototype.am=function(t,e,i,n,r,o){for(;0<=--o;){var s=e*this[t++]+i[n]+r;r=Math.floor(s/67108864),i[n++]=67108863&s}return r},m=26):(t.prototype.am=function(t,e,i,n,r,o){var s=16383&e;for(e>>=14;0<=--o;){var l=16383&this[t],p=this[t++]>>14,h=e*l+p*s;r=((l=s*l+((16383&h)<<14)+i[n]+r)>>28)+(h>>14)+e*p,i[n++]=268435455&l}return r},m=28),t.prototype.DB=m,t.prototype.DM=(1<<m)-1,t.prototype.DV=1<<m,t.prototype.FV=4503599627370496,t.prototype.F1=52-m,t.prototype.F2=2*m-52;var L,E=[];for(L=0,m=48;9>=L;++L)E[m++]=L;for(L=10,m=97;36>L;++L)E[m++]=L;for(L=10,m=65;36>L;++L)E[m++]=L;o.prototype.convert=function(t){return 0>t.s||0<=t.compareTo(this.m)?t.mod(this.m):t},o.prototype.revert=function(t){return t},o.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},o.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},o.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},s.prototype.convert=function(i){var n=e();return i.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),0>i.s&&0<n.compareTo(t.ZERO)&&this.m.subTo(n,n),n},s.prototype.revert=function(t){var i=e();return t.copyTo(i),this.reduce(i),i},s.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),0<=t.compareTo(this.m)&&t.subTo(this.m,t)},s.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},s.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},t.prototype.copyTo=function(t){for(var e=this.t-1;0<=e;--e)t[e]=this[e];t.t=this.t,t.s=this.s},t.prototype.fromInt=function(t){this.t=1,this.s=0>t?-1:0,0<t?this[0]=t:-1>t?this[0]=t+this.DV:this.t=0},t.prototype.fromString=function(e,n){if(16==n)var r=4;else if(8==n)r=3;else if(256==n)r=8;else if(2==n)r=1;else if(32==n)r=5;else if(4==n)r=2;else{this.fromRadix(e,n);return}this.s=this.t=0;for(var o=e.length,s=!1,l=0;0<=--o;){var p=8==r?255&e[o]:i(e,o);0>p?"-"==e.charAt(o)&&(s=!0):(s=!1,0==l?this[this.t++]=p:l+r>this.DB?(this[this.t-1]|=(p&(1<<this.DB-l)-1)<<l,this[this.t++]=p>>this.DB-l):this[this.t-1]|=p<<l,(l+=r)>=this.DB&&(l-=this.DB))}8==r&&0!=(128&e[0])&&(this.s=-1,0<l&&(this[this.t-1]|=(1<<this.DB-l)-1<<l)),this.clamp(),s&&t.ZERO.subTo(this,this)},t.prototype.clamp=function(){for(var t=this.s&this.DM;0<this.t&&this[this.t-1]==t;)--this.t},t.prototype.dlShiftTo=function(t,e){var i;for(i=this.t-1;0<=i;--i)e[i+t]=this[i];for(i=t-1;0<=i;--i)e[i]=0;e.t=this.t+t,e.s=this.s},t.prototype.drShiftTo=function(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s},t.prototype.lShiftTo=function(t,e){var i,n=t%this.DB,r=this.DB-n,o=(1<<r)-1,s=Math.floor(t/this.DB),l=this.s<<n&this.DM;for(i=this.t-1;0<=i;--i)e[i+s+1]=this[i]>>r|l,l=(this[i]&o)<<n;for(i=s-1;0<=i;--i)e[i]=0;e[s]=l,e.t=this.t+s+1,e.s=this.s,e.clamp()},t.prototype.rShiftTo=function(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)e.t=0;else{var n=t%this.DB,r=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<r,e[s-i]=this[s]>>n;0<n&&(e[this.t-i-1]|=(this.s&o)<<r),e.t=this.t-i,e.clamp()}},t.prototype.subTo=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=0>n?-1:0,-1>n?e[i++]=this.DV+n:0<n&&(e[i++]=n),e.t=i,e.clamp()},t.prototype.multiplyTo=function(e,i){var n=this.abs(),r=e.abs(),o=n.t;for(i.t=o+r.t;0<=--o;)i[o]=0;for(o=0;o<r.t;++o)i[o+n.t]=n.am(0,r[o],i,o,0,n.t);i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)},t.prototype.squareTo=function(t){for(var e=this.abs(),i=t.t=2*e.t;0<=--i;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}0<t.t&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()},t.prototype.divRemTo=function(i,n,o){var s=i.abs();if(!(0>=s.t)){var l=this.abs();if(l.t<s.t)null!=n&&n.fromInt(0),null!=o&&this.copyTo(o);else{null==o&&(o=e());var p=e(),h=this.s;i=i.s;var u=this.DB-r(s[s.t-1]);if(0<u?(s.lShiftTo(u,p),l.lShiftTo(u,o)):(s.copyTo(p),l.copyTo(o)),s=p.t,0!=(l=p[s-1])){var a=l*(1<<this.F1)+(1<s?p[s-2]>>this.F2:0),f=this.FV/a;a=(1<<this.F1)/a;var d=1<<this.F2,P=o.t,c=P-s,y=null==n?e():n;for(p.dlShiftTo(c,y),0<=o.compareTo(y)&&(o[o.t++]=1,o.subTo(y,o)),t.ONE.dlShiftTo(s,y),y.subTo(p,p);p.t<s;)p[p.t++]=0;for(;0<=--c;){var m=o[--P]==l?this.DM:Math.floor(o[P]*f+(o[P-1]+d)*a);if((o[P]+=p.am(0,m,o,c,0,s))<m)for(p.dlShiftTo(c,y),o.subTo(y,o);o[P]<--m;)o.subTo(y,o)}null!=n&&(o.drShiftTo(s,n),h!=i&&t.ZERO.subTo(n,n)),o.t=s,o.clamp(),0<u&&o.rShiftTo(u,o),0>h&&t.ZERO.subTo(o,o)}}}},t.prototype.invDigit=function(){if(1>this.t)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return 0<(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)?this.DV-e:-e},t.prototype.isEven=function(){return 0==(0<this.t?1&this[0]:this.s)},t.prototype.exp=function(i,n){if(4294967295<i||1>i)return t.ONE;var o=e(),s=e(),l=n.convert(this),p=r(i)-1;for(l.copyTo(o);0<=--p;)if(n.sqrTo(o,s),0<(i&1<<p))n.mulTo(s,l,o);else{var h=o;o=s,s=h}return n.revert(o)},t.prototype.toString=function(t){if(0>this.s)return"-"+this.negate().toString(t);if(16==t)t=4;else if(8==t)t=3;else if(2==t)t=1;else if(32==t)t=5;else{if(4!=t)return this.toRadix(t);t=2}var e,i=(1<<t)-1,n=!1,r="",o=this.t,s=this.DB-o*this.DB%t;if(0<o--)for(s<this.DB&&0<(e=this[o]>>s)&&(n=!0,r="0123456789abcdefghijklmnopqrstuvwxyz".charAt(e));0<=o;)s<t?e=(this[o]&(1<<s)-1)<<t-s|this[--o]>>(s+=this.DB-t):(e=this[o]>>(s-=t)&i,0>=s&&(s+=this.DB,--o)),0<e&&(n=!0),n&&(r+="0123456789abcdefghijklmnopqrstuvwxyz".charAt(e));return n?r:"0"},t.prototype.negate=function(){var i=e();return t.ZERO.subTo(this,i),i},t.prototype.abs=function(){return 0>this.s?this.negate():this},t.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(0!=(e=i-t.t))return 0>this.s?-e:e;for(;0<=--i;)if(0!=(e=this[i]-t[i]))return e;return 0},t.prototype.bitLength=function(){return 0>=this.t?0:this.DB*(this.t-1)+r(this[this.t-1]^this.s&this.DM)},t.prototype.mod=function(i){var n=e();return this.abs().divRemTo(i,null,n),0>this.s&&0<n.compareTo(t.ZERO)&&i.subTo(n,n),n},t.prototype.modPowInt=function(t,e){var i=256>t||e.isEven()?new o(e):new s(e);return this.exp(t,i)},t.ZERO=n(0),t.ONE=n(1),a.prototype.convert=f,a.prototype.revert=f,a.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i)},a.prototype.sqrTo=function(t,e){t.squareTo(e)},d.prototype.convert=function(t){if(0>t.s||t.t>2*this.m.t)return t.mod(this.m);if(0>t.compareTo(this.m))return t;var i=e();return t.copyTo(i),this.reduce(i),i},d.prototype.revert=function(t){return t},d.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);0>t.compareTo(this.r2);)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);0<=t.compareTo(this.m);)t.subTo(this.m,t)},d.prototype.mulTo=function(t,e,i){t.multiplyTo(e,i),this.reduce(i)},d.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var T=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],X=67108864/T[T.length-1];t.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},t.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||2>t||36<t)return"0";var i=this.chunkSize(t),r=n(i=Math.pow(t,i)),o=e(),s=e(),l="";for(this.divRemTo(r,o,s);0<o.signum();)l=(i+s.intValue()).toString(t).substr(1)+l,o.divRemTo(r,o,s);return s.intValue().toString(t)+l},t.prototype.fromRadix=function(e,n){this.fromInt(0),null==n&&(n=10);for(var r=this.chunkSize(n),o=Math.pow(n,r),s=!1,l=0,p=0,h=0;h<e.length;++h){var u=i(e,h);0>u?"-"==e.charAt(h)&&0==this.signum()&&(s=!0):(p=n*p+u,++l>=r&&(this.dMultiply(o),this.dAddOffset(p,0),p=l=0))}0<l&&(this.dMultiply(Math.pow(n,l)),this.dAddOffset(p,0)),s&&t.ZERO.subTo(this,this)},t.prototype.fromNumber=function(e,i,n){if("number"==typeof i){if(2>e)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),p,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this)}else{var r=7&e;(n=[]).length=(e>>3)+1,i.nextBytes(n),n[0]=0<r?n[0]&(1<<r)-1:0,this.fromString(n,256)}},t.prototype.bitwiseTo=function(t,e,i){var n,r=Math.min(t.t,this.t);for(n=0;n<r;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){var o=t.s&this.DM;for(n=r;n<this.t;++n)i[n]=e(this[n],o);i.t=this.t}else{for(o=this.s&this.DM,n=r;n<t.t;++n)i[n]=e(o,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()},t.prototype.changeBit=function(e,i){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,i,n),n},t.prototype.addTo=function(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=0>n?-1:0,0<n?e[i++]=n:-1>n&&(e[i++]=this.DV+n),e.t=i,e.clamp()},t.prototype.dMultiply=function(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},t.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}},t.prototype.multiplyLowerTo=function(t,e,i){var n,r=Math.min(this.t+t.t,e);for(i.s=0,i.t=r;0<r;)i[--r]=0;for(n=i.t-this.t;r<n;++r)i[r+this.t]=this.am(0,t[r],i,r,0,this.t);for(n=Math.min(t.t,e);r<n;++r)this.am(0,t[r],i,r,0,e-r);i.clamp()},t.prototype.multiplyUpperTo=function(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;0<=--n;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)},t.prototype.modInt=function(t){if(0>=t)return 0;var e=this.DV%t,i=0>this.s?t-1:0;if(0<this.t){if(0==e)i=this[0]%t;else for(var n=this.t-1;0<=n;--n)i=(e*i+this[n])%t}return i},t.prototype.millerRabin=function(i){var n=this.subtract(t.ONE),r=n.getLowestSetBit();if(0>=r)return!1;var o=n.shiftRight(r);(i=i+1>>1)>T.length&&(i=T.length);for(var s=e(),l=0;l<i;++l){s.fromInt(T[Math.floor(Math.random()*T.length)]);var p=s.modPow(o,this);if(0!=p.compareTo(t.ONE)&&0!=p.compareTo(n)){for(var h=1;h++<r&&0!=p.compareTo(n);)if(0==(p=p.modPowInt(2,this)).compareTo(t.ONE))return!1;if(0!=p.compareTo(n))return!1}}return!0},t.prototype.clone=function(){var t=e();return this.copyTo(t),t},t.prototype.intValue=function(){if(0>this.s){if(1==this.t)return this[0]-this.DV;if(0==this.t)return -1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},t.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},t.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},t.prototype.signum=function(){return 0>this.s?-1:0>=this.t||1==this.t&&0>=this[0]?0:1},t.prototype.toByteArray=function(){var t=this.t,e=[];e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(0<t--)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);0<=t;)8>n?i=(this[t]&(1<<n)-1)<<8-n|this[--t]>>(n+=this.DB-8):(i=this[t]>>(n-=8)&255,0>=n&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(0<r||i!=this.s)&&(e[r++]=i);return e},t.prototype.equals=function(t){return 0==this.compareTo(t)},t.prototype.min=function(t){return 0>this.compareTo(t)?this:t},t.prototype.max=function(t){return 0<this.compareTo(t)?this:t},t.prototype.and=function(t){var i=e();return this.bitwiseTo(t,l,i),i},t.prototype.or=function(t){var i=e();return this.bitwiseTo(t,p,i),i},t.prototype.xor=function(t){var i=e();return this.bitwiseTo(t,h,i),i},t.prototype.andNot=function(t){var i=e();return this.bitwiseTo(t,u,i),i},t.prototype.not=function(){for(var t=e(),i=0;i<this.t;++i)t[i]=this.DM&~this[i];return t.t=this.t,t.s=~this.s,t},t.prototype.shiftLeft=function(t){var i=e();return 0>t?this.rShiftTo(-t,i):this.lShiftTo(t,i),i},t.prototype.shiftRight=function(t){var i=e();return 0>t?this.lShiftTo(-t,i):this.rShiftTo(t,i),i},t.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this[t]){var e=t*this.DB;if(0==(t=this[t]))t=-1;else{var i=0;0==(65535&t)&&(t>>=16,i+=16),0==(255&t)&&(t>>=8,i+=8),0==(15&t)&&(t>>=4,i+=4),0==(3&t)&&(t>>=2,i+=2),0==(1&t)&&++i,t=i}return e+t}return 0>this.s?this.t*this.DB:-1},t.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i){for(var n=this[i]^e,r=0;0!=n;)n&=n-1,++r;t+=r}return t},t.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)},t.prototype.setBit=function(t){return this.changeBit(t,p)},t.prototype.clearBit=function(t){return this.changeBit(t,u)},t.prototype.flipBit=function(t){return this.changeBit(t,h)},t.prototype.add=function(t){var i=e();return this.addTo(t,i),i},t.prototype.subtract=function(t){var i=e();return this.subTo(t,i),i},t.prototype.multiply=function(t){var i=e();return this.multiplyTo(t,i),i},t.prototype.divide=function(t){var i=e();return this.divRemTo(t,i,null),i},t.prototype.remainder=function(t){var i=e();return this.divRemTo(t,null,i),i},t.prototype.divideAndRemainder=function(t){var i=e(),n=e();return this.divRemTo(t,i,n),[i,n]},t.prototype.modPow=function(t,i){var l=t.bitLength(),p=n(1);if(0>=l)return p;var h=18>l?1:48>l?3:144>l?4:768>l?5:6,u=8>l?new o(i):i.isEven()?new d(i):new s(i),a=[],f=3,P=h-1,c=(1<<h)-1;if(a[1]=u.convert(this),1<h)for(l=e(),u.sqrTo(a[1],l);f<=c;)a[f]=e(),u.mulTo(l,a[f-2],a[f]),f+=2;var y=t.t-1,m=!0,v=e();for(l=r(t[y])-1;0<=y;){if(l>=P)var x=t[y]>>l-P&c;else x=(t[y]&(1<<l+1)-1)<<P-l,0<y&&(x|=t[y-1]>>this.DB+l-P);for(f=h;0==(1&x);)x>>=1,--f;if(0>(l-=f)&&(l+=this.DB,--y),m)a[x].copyTo(p),m=!1;else{for(;1<f;)u.sqrTo(p,v),u.sqrTo(v,p),f-=2;0<f?u.sqrTo(p,v):(f=p,p=v,v=f),u.mulTo(v,a[x],p)}for(;0<=y&&0==(t[y]&1<<l);)u.sqrTo(p,v),f=p,p=v,v=f,0>--l&&(l=this.DB-1,--y)}return u.revert(p)},t.prototype.modInverse=function(e){var i=e.isEven();if(this.isEven()&&i||0==e.signum())return t.ZERO;for(var r=e.clone(),o=this.clone(),s=n(1),l=n(0),p=n(0),h=n(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),i?(s.isEven()&&l.isEven()||(s.addTo(this,s),l.subTo(e,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(e,l),l.rShiftTo(1,l);for(;o.isEven();)o.rShiftTo(1,o),i?(p.isEven()&&h.isEven()||(p.addTo(this,p),h.subTo(e,h)),p.rShiftTo(1,p)):h.isEven()||h.subTo(e,h),h.rShiftTo(1,h);0<=r.compareTo(o)?(r.subTo(o,r),i&&s.subTo(p,s),l.subTo(h,l)):(o.subTo(r,o),i&&p.subTo(s,p),h.subTo(l,h))}return 0!=o.compareTo(t.ONE)?t.ZERO:0<=h.compareTo(e)?h.subtract(e):0>h.signum()?(h.addTo(e,h),0>h.signum()?h.add(e):h):h},t.prototype.pow=function(t){return this.exp(t,new a)},t.prototype.gcd=function(t){var e=0>this.s?this.negate():this.clone();if(t=0>t.s?t.negate():t.clone(),0>e.compareTo(t)){var i=e;e=t,t=i}i=e.getLowestSetBit();var n=t.getLowestSetBit();if(0>n)return e;for(i<n&&(n=i),0<n&&(e.rShiftTo(n,e),t.rShiftTo(n,t));0<e.signum();)0<(i=e.getLowestSetBit())&&e.rShiftTo(i,e),0<(i=t.getLowestSetBit())&&t.rShiftTo(i,t),0<=e.compareTo(t)?(e.subTo(t,e),e.rShiftTo(1,e)):(t.subTo(e,t),t.rShiftTo(1,t));return 0<n&&t.lShiftTo(n,t),t},t.prototype.isProbablePrime=function(t){var e,i=this.abs();if(1==i.t&&i[0]<=T[T.length-1]){for(e=0;e<T.length;++e)if(i[0]==T[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<T.length;){for(var n=T[e],r=e+1;r<T.length&&n<X;)n*=T[r++];for(n=i.modInt(n);e<r;)if(0==n%T[e++])return!1}return i.millerRabin(t)},t.prototype.square=function(){var t=e();return this.squareTo(t),t},t.prototype.IsNegative=function(){return -1==this.compareTo(t.ZERO)},t.op_Equality=function(t,e){return 0==t.compareTo(e)},t.op_Inequality=function(t,e){return 0!=t.compareTo(e)},t.op_GreaterThan=function(t,e){return 0<t.compareTo(e)},t.op_LessThan=function(t,e){return 0>t.compareTo(e)},t.op_Addition=function(e,i){return new t(e,void 0,void 0).add(new t(i,void 0,void 0))},t.op_Subtraction=function(e,i){return new t(e,void 0,void 0).subtract(new t(i,void 0,void 0))},t.Int128Mul=function(e,i){return new t(e,void 0,void 0).multiply(new t(i,void 0,void 0))},t.op_Division=function(t,e){return t.divide(e)},t.prototype.ToDouble=function(){return parseFloat(this.toString())},m=function(t,e){var i;if(void 0===Object.getOwnPropertyNames)for(i in e.prototype)(void 0===t.prototype[i]||t.prototype[i]===Object.prototype[i])&&(t.prototype[i]=e.prototype[i]);else for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)void 0===Object.getOwnPropertyDescriptor(t.prototype,n[r])&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)void 0===t[i]&&(t[i]=e[i]);t.$baseCtor=e},P.Path=function(){return[]},P.Path.prototype.push=Array.prototype.push,P.Paths=function(){return[]},P.Paths.prototype.push=Array.prototype.push,P.DoublePoint=function(){var t=arguments;this.Y=this.X=0,1===t.length?(this.X=t[0].X,this.Y=t[0].Y):2===t.length&&(this.X=t[0],this.Y=t[1])},P.DoublePoint0=function(){this.Y=this.X=0},P.DoublePoint0.prototype=P.DoublePoint.prototype,P.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},P.DoublePoint1.prototype=P.DoublePoint.prototype,P.DoublePoint2=function(t,e){this.X=t,this.Y=e},P.DoublePoint2.prototype=P.DoublePoint.prototype,P.PolyNode=function(){this.m_Parent=null,this.m_polygon=new P.Path,this.m_endtype=this.m_jointype=this.m_Index=0,this.m_Childs=[],this.IsOpen=!1},P.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},P.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},P.PolyNode.prototype.Contour=function(){return this.m_polygon},P.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},P.PolyNode.prototype.GetNext=function(){return 0<this.m_Childs.length?this.m_Childs[0]:this.GetNextSiblingUp()},P.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index===this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},P.PolyNode.prototype.Childs=function(){return this.m_Childs},P.PolyNode.prototype.Parent=function(){return this.m_Parent},P.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},P.PolyTree=function(){this.m_AllPolys=[],P.PolyNode.call(this)},P.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},P.PolyTree.prototype.GetFirst=function(){return 0<this.m_Childs.length?this.m_Childs[0]:null},P.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return 0<t&&this.m_Childs[0]!==this.m_AllPolys[0]&&t--,t},m(P.PolyTree,P.PolyNode),P.Math_Abs_Int64=P.Math_Abs_Int32=P.Math_Abs_Double=function(t){return Math.abs(t)},P.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},P.Cast_Int32=y||g||x?function(t){return 0|t}:function(t){return~~t},void 0===Number.toInteger&&(Number.toInteger=null),P.Cast_Int64=v?function(t){return -2147483648>t||2147483647<t?0>t?Math.ceil(t):Math.floor(t):~~t}:I&&"function"==typeof Number.toInteger?function(t){return Number.toInteger(t)}:_||C?function(t){return parseInt(t,10)}:y?function(t){return -2147483648>t||2147483647<t?0>t?Math.ceil(t):Math.floor(t):0|t}:function(t){return 0>t?Math.ceil(t):Math.floor(t)},P.Clear=function(t){t.length=0},P.PI=3.141592653589793,P.PI2=6.283185307179586,P.IntPoint=function(){var t=arguments,e=t.length;this.Y=this.X=0,P.use_xyz?(this.Z=0,3===e?(this.X=t[0],this.Y=t[1],this.Z=t[2]):2===e?(this.X=t[0],this.Y=t[1],this.Z=0):1===e?t[0]instanceof P.DoublePoint?(t=t[0],this.X=P.Clipper.Round(t.X),this.Y=P.Clipper.Round(t.Y),this.Z=0):(void 0===(t=t[0]).Z&&(t.Z=0),this.X=t.X,this.Y=t.Y,this.Z=t.Z):this.Z=this.Y=this.X=0):2===e?(this.X=t[0],this.Y=t[1]):1===e?t[0]instanceof P.DoublePoint?(t=t[0],this.X=P.Clipper.Round(t.X),this.Y=P.Clipper.Round(t.Y)):(t=t[0],this.X=t.X,this.Y=t.Y):this.Y=this.X=0},P.IntPoint.op_Equality=function(t,e){return t.X===e.X&&t.Y===e.Y},P.IntPoint.op_Inequality=function(t,e){return t.X!==e.X||t.Y!==e.Y},P.IntPoint0=function(){this.Y=this.X=0,P.use_xyz&&(this.Z=0)},P.IntPoint0.prototype=P.IntPoint.prototype,P.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,P.use_xyz&&(this.Z=void 0===t.Z?0:t.Z)},P.IntPoint1.prototype=P.IntPoint.prototype,P.IntPoint1dp=function(t){this.X=P.Clipper.Round(t.X),this.Y=P.Clipper.Round(t.Y),P.use_xyz&&(this.Z=0)},P.IntPoint1dp.prototype=P.IntPoint.prototype,P.IntPoint2=function(t,e,i){this.X=t,this.Y=e,P.use_xyz&&(this.Z=void 0===i?0:i)},P.IntPoint2.prototype=P.IntPoint.prototype,P.IntRect=function(){var t=arguments,e=t.length;4===e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1===e?(t=t[0],this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom):this.bottom=this.right=this.top=this.left=0},P.IntRect0=function(){this.bottom=this.right=this.top=this.left=0},P.IntRect0.prototype=P.IntRect.prototype,P.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},P.IntRect1.prototype=P.IntRect.prototype,P.IntRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},P.IntRect4.prototype=P.IntRect.prototype,P.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},P.PolyType={ptSubject:0,ptClip:1},P.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},P.JoinType={jtSquare:0,jtRound:1,jtMiter:2},P.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},P.EdgeSide={esLeft:0,esRight:1},P.Direction={dRightToLeft:0,dLeftToRight:1},P.TEdge=function(){this.Bot=new P.IntPoint0,this.Curr=new P.IntPoint0,this.Top=new P.IntPoint0,this.Delta=new P.IntPoint0,this.Dx=0,this.PolyTyp=P.PolyType.ptSubject,this.Side=P.EdgeSide.esLeft,this.OutIdx=this.WindCnt2=this.WindCnt=this.WindDelta=0,this.PrevInSEL=this.NextInSEL=this.PrevInAEL=this.NextInAEL=this.NextInLML=this.Prev=this.Next=null},P.IntersectNode=function(){this.Edge2=this.Edge1=null,this.Pt=new P.IntPoint0},P.MyIntersectNodeSort=function(){},P.MyIntersectNodeSort.Compare=function(t,e){var i=e.Pt.Y-t.Pt.Y;return 0<i?1:0>i?-1:0},P.LocalMinima=function(){this.Y=0,this.Next=this.RightBound=this.LeftBound=null},P.Scanbeam=function(){this.Y=0,this.Next=null},P.Maxima=function(){this.X=0,this.Prev=this.Next=null},P.OutRec=function(){this.Idx=0,this.IsOpen=this.IsHole=!1,this.PolyNode=this.BottomPt=this.Pts=this.FirstLeft=null},P.OutPt=function(){this.Idx=0,this.Pt=new P.IntPoint0,this.Prev=this.Next=null},P.Join=function(){this.OutPt2=this.OutPt1=null,this.OffPt=new P.IntPoint0},P.ClipperBase=function(){this.m_CurrentLM=this.m_MinimaList=null,this.m_edges=[],this.PreserveCollinear=this.m_HasOpenPaths=this.m_UseFullRange=!1,this.m_ActiveEdges=this.m_PolyOuts=this.m_Scanbeam=null},P.ClipperBase.horizontal=-9007199254740992,P.ClipperBase.Skip=-2,P.ClipperBase.Unassigned=-1,P.ClipperBase.tolerance=1e-20,P.ClipperBase.loRange=47453132,P.ClipperBase.hiRange=0xfffffffffffff,P.ClipperBase.near_zero=function(t){return t>-P.ClipperBase.tolerance&&t<P.ClipperBase.tolerance},P.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},P.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(P.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!==e)return!1},P.ClipperBase.prototype.PointOnLineSegment=function(e,i,n,r){return r?e.X===i.X&&e.Y===i.Y||e.X===n.X&&e.Y===n.Y||e.X>i.X==e.X<n.X&&e.Y>i.Y==e.Y<n.Y&&t.op_Equality(t.Int128Mul(e.X-i.X,n.Y-i.Y),t.Int128Mul(n.X-i.X,e.Y-i.Y)):e.X===i.X&&e.Y===i.Y||e.X===n.X&&e.Y===n.Y||e.X>i.X==e.X<n.X&&e.Y>i.Y==e.Y<n.Y&&(e.X-i.X)*(n.Y-i.Y)==(n.X-i.X)*(e.Y-i.Y)},P.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var n=e;;){if(this.PointOnLineSegment(t,n.Pt,n.Next.Pt,i))return!0;if((n=n.Next)===e)break}return!1},P.ClipperBase.prototype.SlopesEqual=P.ClipperBase.SlopesEqual=function(){var e=arguments,i=e.length;if(3===i){i=e[0];var n=e[1];return(e=e[2])?t.op_Equality(t.Int128Mul(i.Delta.Y,n.Delta.X),t.Int128Mul(i.Delta.X,n.Delta.Y)):P.Cast_Int64(i.Delta.Y*n.Delta.X)===P.Cast_Int64(i.Delta.X*n.Delta.Y)}if(4===i){i=e[0],n=e[1];var r=e[2];return(e=e[3])?t.op_Equality(t.Int128Mul(i.Y-n.Y,n.X-r.X),t.Int128Mul(i.X-n.X,n.Y-r.Y)):0==P.Cast_Int64((i.Y-n.Y)*(n.X-r.X))-P.Cast_Int64((i.X-n.X)*(n.Y-r.Y))}i=e[0],n=e[1],r=e[2];var o=e[3];return(e=e[4])?t.op_Equality(t.Int128Mul(i.Y-n.Y,r.X-o.X),t.Int128Mul(i.X-n.X,r.Y-o.Y)):0==P.Cast_Int64((i.Y-n.Y)*(r.X-o.X))-P.Cast_Int64((i.X-n.X)*(r.Y-o.Y))},P.ClipperBase.SlopesEqual3=function(e,i,n){return n?t.op_Equality(t.Int128Mul(e.Delta.Y,i.Delta.X),t.Int128Mul(e.Delta.X,i.Delta.Y)):P.Cast_Int64(e.Delta.Y*i.Delta.X)===P.Cast_Int64(e.Delta.X*i.Delta.Y)},P.ClipperBase.SlopesEqual4=function(e,i,n,r){return r?t.op_Equality(t.Int128Mul(e.Y-i.Y,i.X-n.X),t.Int128Mul(e.X-i.X,i.Y-n.Y)):0==P.Cast_Int64((e.Y-i.Y)*(i.X-n.X))-P.Cast_Int64((e.X-i.X)*(i.Y-n.Y))},P.ClipperBase.SlopesEqual5=function(e,i,n,r,o){return o?t.op_Equality(t.Int128Mul(e.Y-i.Y,n.X-r.X),t.Int128Mul(e.X-i.X,n.Y-r.Y)):0==P.Cast_Int64((e.Y-i.Y)*(n.X-r.X))-P.Cast_Int64((e.X-i.X)*(n.Y-r.Y))},P.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,n=this.m_edges[t].length;i<n;++i)this.m_edges[t][i]=null;P.Clear(this.m_edges[t])}P.Clear(this.m_edges),this.m_HasOpenPaths=this.m_UseFullRange=!1},P.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},P.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>P.ClipperBase.hiRange||t.Y>P.ClipperBase.hiRange||-t.X>P.ClipperBase.hiRange||-t.Y>P.ClipperBase.hiRange)&&P.Error("Coordinate outside allowed range in RangeTest()."):(t.X>P.ClipperBase.loRange||t.Y>P.ClipperBase.loRange||-t.X>P.ClipperBase.loRange||-t.Y>P.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},P.ClipperBase.prototype.InitEdge=function(t,e,i,n){t.Next=e,t.Prev=i,t.Curr.X=n.X,t.Curr.Y=n.Y,P.use_xyz&&(t.Curr.Z=n.Z),t.OutIdx=-1},P.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,P.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,P.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,P.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,P.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=e},P.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;P.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||P.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!==P.ClipperBase.horizontal&&t.Prev.Dx!==P.ClipperBase.horizontal)break;for(;t.Prev.Dx===P.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx===P.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!==t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},P.ClipperBase.prototype.ProcessBound=function(t,e){var i,n=t;if(n.OutIdx===P.ClipperBase.Skip){if(t=n,e){for(;t.Top.Y===t.Next.Bot.Y;)t=t.Next;for(;t!==n&&t.Dx===P.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y===t.Prev.Bot.Y;)t=t.Prev;for(;t!==n&&t.Dx===P.ClipperBase.horizontal;)t=t.Next}if(t===n)n=e?t.Next:t.Prev;else{t=e?n.Next:n.Prev;var r=new P.LocalMinima;r.Next=null,r.Y=t.Bot.Y,r.LeftBound=null,r.RightBound=t,t.WindDelta=0,n=this.ProcessBound(t,e),this.InsertLocalMinima(r)}return n}if(t.Dx===P.ClipperBase.horizontal&&((r=e?t.Prev:t.Next).Dx===P.ClipperBase.horizontal?r.Bot.X!==t.Bot.X&&r.Top.X!==t.Bot.X&&this.ReverseHorizontal(t):r.Bot.X!==t.Bot.X&&this.ReverseHorizontal(t)),r=t,e){for(;n.Top.Y===n.Next.Bot.Y&&n.Next.OutIdx!==P.ClipperBase.Skip;)n=n.Next;if(n.Dx===P.ClipperBase.horizontal&&n.Next.OutIdx!==P.ClipperBase.Skip){for(i=n;i.Prev.Dx===P.ClipperBase.horizontal;)i=i.Prev;i.Prev.Top.X>n.Next.Top.X&&(n=i.Prev)}for(;t!==n;)t.NextInLML=t.Next,t.Dx===P.ClipperBase.horizontal&&t!==r&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx===P.ClipperBase.horizontal&&t!==r&&t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),n=n.Next}else{for(;n.Top.Y===n.Prev.Bot.Y&&n.Prev.OutIdx!==P.ClipperBase.Skip;)n=n.Prev;if(n.Dx===P.ClipperBase.horizontal&&n.Prev.OutIdx!==P.ClipperBase.Skip){for(i=n;i.Next.Dx===P.ClipperBase.horizontal;)i=i.Next;(i.Next.Top.X===n.Prev.Top.X||i.Next.Top.X>n.Prev.Top.X)&&(n=i.Next)}for(;t!==n;)t.NextInLML=t.Prev,t.Dx===P.ClipperBase.horizontal&&t!==r&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx===P.ClipperBase.horizontal&&t!==r&&t.Bot.X!==t.Next.Top.X&&this.ReverseHorizontal(t),n=n.Prev}return n},P.ClipperBase.prototype.AddPath=function(t,e,i){P.use_lines?i||e!==P.PolyType.ptClip||P.Error("AddPath: Open paths must be subject."):i||P.Error("AddPath: Open paths have been disabled.");var n=t.length-1;if(i)for(;0<n&&P.IntPoint.op_Equality(t[n],t[0]);)--n;for(;0<n&&P.IntPoint.op_Equality(t[n],t[n-1]);)--n;if(i&&2>n||!i&&1>n)return!1;for(var r=[],o=0;o<=n;o++)r.push(new P.TEdge);var s=!0;r[1].Curr.X=t[1].X,r[1].Curr.Y=t[1].Y,P.use_xyz&&(r[1].Curr.Z=t[1].Z);var l={Value:this.m_UseFullRange};for(this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[n],l),this.m_UseFullRange=l.Value,this.InitEdge(r[0],r[1],r[n],t[0]),this.InitEdge(r[n],r[0],r[n-1],t[n]),o=n-1;1<=o;--o)l.Value=this.m_UseFullRange,this.RangeTest(t[o],l),this.m_UseFullRange=l.Value,this.InitEdge(r[o],r[o+1],r[o-1],t[o]);for(o=t=n=r[0];;)if(t.Curr===t.Next.Curr&&(i||t.Next!==n)){if(t===t.Next)break;t===n&&(n=t.Next),o=t=this.RemoveEdge(t)}else{if(t.Prev===t.Next)break;if(i&&P.ClipperBase.SlopesEqual4(t.Prev.Curr,t.Curr,t.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(t.Prev.Curr,t.Curr,t.Next.Curr))){t===n&&(n=t.Next),o=t=(t=this.RemoveEdge(t)).Prev;continue}if((t=t.Next)===o||!i&&t.Next===n)break}if(!i&&t===t.Next||i&&t.Prev===t.Next)return!1;i||(this.m_HasOpenPaths=!0,n.Prev.OutIdx=P.ClipperBase.Skip),t=n;do this.InitEdge2(t,e),t=t.Next,s&&t.Curr.Y!==n.Curr.Y&&(s=!1);while(t!==n)if(s){if(i)return!1;for(t.Prev.OutIdx=P.ClipperBase.Skip,(e=new P.LocalMinima).Next=null,e.Y=t.Bot.Y,e.LeftBound=null,e.RightBound=t,e.RightBound.Side=P.EdgeSide.esRight,e.RightBound.WindDelta=0;t.Bot.X!==t.Prev.Top.X&&this.ReverseHorizontal(t),t.Next.OutIdx!==P.ClipperBase.Skip;)t=t.NextInLML=t.Next;return this.InsertLocalMinima(e),this.m_edges.push(r),!0}for(this.m_edges.push(r),s=null,P.IntPoint.op_Equality(t.Prev.Bot,t.Prev.Top)&&(t=t.Next);(t=this.FindNextLocMin(t))!==s;)null===s&&(s=t),(e=new P.LocalMinima).Next=null,e.Y=t.Bot.Y,t.Dx<t.Prev.Dx?(e.LeftBound=t.Prev,e.RightBound=t,r=!1):(e.LeftBound=t,e.RightBound=t.Prev,r=!0),e.LeftBound.Side=P.EdgeSide.esLeft,e.RightBound.Side=P.EdgeSide.esRight,e.LeftBound.WindDelta=i?e.LeftBound.Next===e.RightBound?-1:1:0,e.RightBound.WindDelta=-e.LeftBound.WindDelta,(t=this.ProcessBound(e.LeftBound,r)).OutIdx===P.ClipperBase.Skip&&(t=this.ProcessBound(t,r)),(n=this.ProcessBound(e.RightBound,!r)).OutIdx===P.ClipperBase.Skip&&(n=this.ProcessBound(n,!r)),e.LeftBound.OutIdx===P.ClipperBase.Skip?e.LeftBound=null:e.RightBound.OutIdx===P.ClipperBase.Skip&&(e.RightBound=null),this.InsertLocalMinima(e),r||(t=n);return!0},P.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,o=t.length;r<o;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},P.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(P.IntPoint.op_Equality(t,i)||P.IntPoint.op_Equality(t,e)||P.IntPoint.op_Equality(i,e))&&(t.X!==i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},P.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},P.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,t.Dx=0===t.Delta.Y?P.ClipperBase.horizontal:t.Delta.X/t.Delta.Y},P.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},P.ClipperBase.prototype.PopLocalMinima=function(t,e){return e.v=this.m_CurrentLM,null!==this.m_CurrentLM&&this.m_CurrentLM.Y===t&&(this.m_CurrentLM=this.m_CurrentLM.Next,!0)},P.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,P.use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},P.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!==this.m_CurrentLM){this.m_Scanbeam=null;for(var t=this.m_MinimaList;null!==t;){this.InsertScanbeam(t.Y);var e=t.LeftBound;null!==e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,P.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=P.ClipperBase.Unassigned),null!==(e=t.RightBound)&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,P.use_xyz&&(e.Curr.Z=e.Bot.Z),e.OutIdx=P.ClipperBase.Unassigned),t=t.Next}this.m_ActiveEdges=null}},P.ClipperBase.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new P.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new P.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(e=this.m_Scanbeam;null!==e.Next&&t<=e.Next.Y;)e=e.Next;if(t!==e.Y){var i=new P.Scanbeam;i.Y=t,i.Next=e.Next,e.Next=i}}},P.ClipperBase.prototype.PopScanbeam=function(t){return null===this.m_Scanbeam?(t.v=0,!1):(t.v=this.m_Scanbeam.Y,this.m_Scanbeam=this.m_Scanbeam.Next,!0)},P.ClipperBase.prototype.LocalMinimaPending=function(){return null!==this.m_CurrentLM},P.ClipperBase.prototype.CreateOutRec=function(){var t=new P.OutRec;return t.Idx=P.ClipperBase.Unassigned,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},P.ClipperBase.prototype.DisposeOutRec=function(t){this.m_PolyOuts[t].Pts=null,this.m_PolyOuts[t]=null},P.ClipperBase.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&P.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,(t=t.NextInLML).Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,t.PrevInAEL=e,t.NextInAEL=i,P.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},P.ClipperBase.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!==t.PrevInAEL&&e.NextInAEL!==e.PrevInAEL){if(t.NextInAEL===e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var n=t.PrevInAEL;null!==n&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else e.NextInAEL===t?(null!==(i=t.NextInAEL)&&(i.PrevInAEL=e),null!==(n=e.PrevInAEL)&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i):(i=t.NextInAEL,n=t.PrevInAEL,t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e));null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},P.ClipperBase.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;(null!==e||null!==i||t===this.m_ActiveEdges)&&(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},P.Clipper=function(t){void 0===t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=P.ClipType.ctIntersection,this.m_IntersectNodeComparer=this.m_IntersectList=this.m_SortedEdges=this.m_ActiveEdges=this.m_Maxima=this.m_Scanbeam=null,this.m_ExecuteLocked=!1,this.m_SubjFillType=this.m_ClipFillType=P.PolyFillType.pftEvenOdd,this.m_GhostJoins=this.m_Joins=null,this.StrictlySimple=this.ReverseSolution=this.m_UsingPolyTree=!1,P.ClipperBase.call(this),this.m_SortedEdges=this.m_ActiveEdges=this.m_Maxima=this.m_Scanbeam=null,this.m_IntersectList=[],this.m_IntersectNodeComparer=P.MyIntersectNodeSort.Compare,this.m_UsingPolyTree=this.m_ExecuteLocked=!1,this.m_PolyOuts=[],this.m_Joins=[],this.m_GhostJoins=[],this.ReverseSolution=0!=(1&t),this.StrictlySimple=0!=(2&t),this.PreserveCollinear=0!=(4&t),P.use_xyz&&(this.ZFillFunction=null)},P.Clipper.ioReverseSolution=1,P.Clipper.ioStrictlySimple=2,P.Clipper.ioPreserveCollinear=4,P.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),P.ClipperBase.prototype.Clear.call(this))},P.Clipper.prototype.InsertMaxima=function(t){var e=new P.Maxima;if(e.X=t,null===this.m_Maxima)this.m_Maxima=e,this.m_Maxima.Next=null,this.m_Maxima.Prev=null;else if(t<this.m_Maxima.X)e.Next=this.m_Maxima,e.Prev=null,this.m_Maxima=e;else{for(var i=this.m_Maxima;null!==i.Next&&t>=i.Next.X;)i=i.Next;t!==i.X&&(e.Next=i.Next,e.Prev=i,null!==i.Next&&(i.Next.Prev=e),i.Next=e)}},P.Clipper.prototype.Execute=function(){var t,e=arguments,i=e.length,n=e[1]instanceof P.PolyTree;if(4!==i||n){if(4===i&&n){i=e[0];var r=e[1];if(n=e[2],e=e[3],this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=n,this.m_ClipFillType=e,this.m_ClipType=i,this.m_UsingPolyTree=!0;try{(t=this.ExecuteInternal())&&this.BuildResult2(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return t}if(2===i&&!n||2===i&&n)return i=e[0],r=e[1],this.Execute(i,r,P.PolyFillType.pftEvenOdd,P.PolyFillType.pftEvenOdd)}else{if(i=e[0],r=e[1],n=e[2],e=e[3],this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&P.Error("Error: PolyTree struct is needed for open path clipping."),this.m_ExecuteLocked=!0,P.Clear(r),this.m_SubjFillType=n,this.m_ClipFillType=e,this.m_ClipType=i,this.m_UsingPolyTree=!1;try{(t=this.ExecuteInternal())&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return t}},P.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole===t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole===t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},P.Clipper.prototype.ExecuteInternal=function(){try{this.Reset(),this.m_Maxima=this.m_SortedEdges=null;var t,e={},i={};if(!this.PopScanbeam(e))return!1;for(this.InsertLocalMinimaIntoAEL(e.v);this.PopScanbeam(i)||this.LocalMinimaPending();){if(this.ProcessHorizontals(),this.m_GhostJoins.length=0,!this.ProcessIntersections(i.v))return!1;this.ProcessEdgesAtTopOfScanbeam(i.v),e.v=i.v,this.InsertLocalMinimaIntoAEL(e.v)}var n=0;for(t=this.m_PolyOuts.length;n<t;n++){var r=this.m_PolyOuts[n];null===r.Pts||r.IsOpen||(r.IsHole^this.ReverseSolution)==0<this.Area$1(r)&&this.ReversePolyPtLinks(r.Pts)}for(this.JoinCommonEdges(),n=0,t=this.m_PolyOuts.length;n<t;n++)r=this.m_PolyOuts[n],null!==r.Pts&&(r.IsOpen?this.FixupOutPolyline(r):this.FixupOutPolygon(r));return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{this.m_Joins.length=0,this.m_GhostJoins.length=0}},P.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);P.Clear(this.m_PolyOuts)},P.Clipper.prototype.AddJoin=function(t,e,i){var n=new P.Join;n.OutPt1=t,n.OutPt2=e,n.OffPt.X=i.X,n.OffPt.Y=i.Y,P.use_xyz&&(n.OffPt.Z=i.Z),this.m_Joins.push(n)},P.Clipper.prototype.AddGhostJoin=function(t,e){var i=new P.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,P.use_xyz&&(i.OffPt.Z=e.Z),this.m_GhostJoins.push(i)},P.Clipper.prototype.SetZ=function(t,e,i){null!==this.ZFillFunction&&0===t.Z&&null!==this.ZFillFunction&&(P.IntPoint.op_Equality(t,e.Bot)?t.Z=e.Bot.Z:P.IntPoint.op_Equality(t,e.Top)?t.Z=e.Top.Z:P.IntPoint.op_Equality(t,i.Bot)?t.Z=i.Bot.Z:P.IntPoint.op_Equality(t,i.Top)?t.Z=i.Top.Z:this.ZFillFunction(e.Bot,e.Top,i.Bot,i.Top,t))},P.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(var e,i,n,r={};this.PopLocalMinima(t,r);){i=r.v.LeftBound,n=r.v.RightBound;var o=null;if(null===i?(this.InsertEdgeIntoAEL(n,null),this.SetWindingCount(n),this.IsContributing(n)&&(o=this.AddOutPt(n,n.Bot))):(null===n?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(o=this.AddOutPt(i,i.Bot))):(this.InsertEdgeIntoAEL(i,null),this.InsertEdgeIntoAEL(n,i),this.SetWindingCount(i),n.WindCnt=i.WindCnt,n.WindCnt2=i.WindCnt2,this.IsContributing(i)&&(o=this.AddLocalMinPoly(i,n,i.Bot))),this.InsertScanbeam(i.Top.Y)),null!==n&&(P.ClipperBase.IsHorizontal(n)?(null!==n.NextInLML&&this.InsertScanbeam(n.NextInLML.Top.Y),this.AddEdgeToSEL(n)):this.InsertScanbeam(n.Top.Y)),null!==i&&null!==n){if(null!==o&&P.ClipperBase.IsHorizontal(n)&&0<this.m_GhostJoins.length&&0!==n.WindDelta){e=0;for(var s=this.m_GhostJoins.length;e<s;e++){var l=this.m_GhostJoins[e];this.HorzSegmentsOverlap(l.OutPt1.Pt.X,l.OffPt.X,n.Bot.X,n.Top.X)&&this.AddJoin(l.OutPt1,o,l.OffPt)}}if(0<=i.OutIdx&&null!==i.PrevInAEL&&i.PrevInAEL.Curr.X===i.Bot.X&&0<=i.PrevInAEL.OutIdx&&P.ClipperBase.SlopesEqual5(i.PrevInAEL.Curr,i.PrevInAEL.Top,i.Curr,i.Top,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta&&(e=this.AddOutPt(i.PrevInAEL,i.Bot),this.AddJoin(o,e,i.Top)),i.NextInAEL!==n&&(0<=n.OutIdx&&0<=n.PrevInAEL.OutIdx&&P.ClipperBase.SlopesEqual5(n.PrevInAEL.Curr,n.PrevInAEL.Top,n.Curr,n.Top,this.m_UseFullRange)&&0!==n.WindDelta&&0!==n.PrevInAEL.WindDelta&&(e=this.AddOutPt(n.PrevInAEL,n.Bot),this.AddJoin(o,e,n.Top)),null!==(o=i.NextInAEL)))for(;o!==n;)this.IntersectEdges(n,o,i.Curr),o=o.NextInAEL}}},P.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges=this.m_ActiveEdges.PrevInAEL=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},P.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X===t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<P.Clipper.TopX(t,e.Top.Y):t.Top.X>P.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},P.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp===P.PolyType.ptSubject?this.m_SubjFillType===P.PolyFillType.pftEvenOdd:this.m_ClipFillType===P.PolyFillType.pftEvenOdd},P.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp===P.PolyType.ptSubject?this.m_ClipFillType===P.PolyFillType.pftEvenOdd:this.m_SubjFillType===P.PolyFillType.pftEvenOdd},P.Clipper.prototype.IsContributing=function(t){if(t.PolyTyp===P.PolyType.ptSubject)var e=this.m_SubjFillType,i=this.m_ClipFillType;else e=this.m_ClipFillType,i=this.m_SubjFillType;switch(e){case P.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!==t.WindCnt)return!1;break;case P.PolyFillType.pftNonZero:if(1!==Math.abs(t.WindCnt))return!1;break;case P.PolyFillType.pftPositive:if(1!==t.WindCnt)return!1;break;default:if(-1!==t.WindCnt)return!1}switch(this.m_ClipType){case P.ClipType.ctIntersection:switch(i){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case P.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return 0>t.WindCnt2}case P.ClipType.ctUnion:switch(i){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return 0===t.WindCnt2;case P.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}case P.ClipType.ctDifference:if(t.PolyTyp===P.PolyType.ptSubject)switch(i){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return 0===t.WindCnt2;case P.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}else switch(i){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case P.PolyFillType.pftPositive:return 0<t.WindCnt2;default:return 0>t.WindCnt2}case P.ClipType.ctXor:if(0===t.WindDelta)switch(i){case P.PolyFillType.pftEvenOdd:case P.PolyFillType.pftNonZero:return 0===t.WindCnt2;case P.PolyFillType.pftPositive:return 0>=t.WindCnt2;default:return 0<=t.WindCnt2}}return!0},P.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!==t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)e=t.PolyTyp===P.PolyType.ptSubject?this.m_SubjFillType:this.m_ClipFillType,t.WindCnt=0===t.WindDelta?e===P.PolyFillType.pftNegative?-1:1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else{if(0===t.WindDelta&&this.m_ClipType!==P.ClipType.ctUnion)t.WindCnt=1;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,n=e.PrevInAEL;null!==n;)n.PolyTyp===e.PolyTyp&&0!==n.WindDelta&&(i=!i),n=n.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta}else t.WindCnt=0>e.WindCnt*e.WindDelta?1<Math.abs(e.WindCnt)?0>e.WindDelta*t.WindDelta?e.WindCnt:e.WindCnt+t.WindDelta:0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?0>e.WindCnt?e.WindCnt-1:e.WindCnt+1:0>e.WindDelta*t.WindDelta?e.WindCnt:e.WindCnt+t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}if(this.IsEvenOddAltFillType(t))for(;e!==t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!==t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},P.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges=this.m_SortedEdges.PrevInSEL=t)},P.Clipper.prototype.PopEdgeFromSEL=function(t){if(t.v=this.m_SortedEdges,null===t.v)return!1;var e=t.v;return this.m_SortedEdges=t.v.NextInSEL,null!==this.m_SortedEdges&&(this.m_SortedEdges.PrevInSEL=null),e.NextInSEL=null,e.PrevInSEL=null,!0},P.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t=t.NextInSEL=t.NextInAEL},P.Clipper.prototype.SwapPositionsInSEL=function(t,e){if((null!==t.NextInSEL||null!==t.PrevInSEL)&&(null!==e.NextInSEL||null!==e.PrevInSEL)){if(t.NextInSEL===e){var i=e.NextInSEL;null!==i&&(i.PrevInSEL=t);var n=t.PrevInSEL;null!==n&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else e.NextInSEL===t?(null!==(i=t.NextInSEL)&&(i.PrevInSEL=e),null!==(n=e.PrevInSEL)&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i):(i=t.NextInSEL,n=t.PrevInSEL,t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e));null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},P.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0===e.WindDelta&&this.AddOutPt(e,i),t.OutIdx===e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},P.Clipper.prototype.AddLocalMinPoly=function(t,e,i){if(P.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx){var n=this.AddOutPt(t,i);e.OutIdx=t.OutIdx,t.Side=P.EdgeSide.esLeft,e.Side=P.EdgeSide.esRight;var r=t;t=r.PrevInAEL===e?e.PrevInAEL:r.PrevInAEL}else n=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=P.EdgeSide.esRight,e.Side=P.EdgeSide.esLeft,t=(r=e).PrevInAEL===t?t.PrevInAEL:r.PrevInAEL;if(null!==t&&0<=t.OutIdx&&t.Top.Y<i.Y&&r.Top.Y<i.Y){e=P.Clipper.TopX(t,i.Y);var o=P.Clipper.TopX(r,i.Y);e===o&&0!==r.WindDelta&&0!==t.WindDelta&&P.ClipperBase.SlopesEqual5(new P.IntPoint2(e,i.Y),t.Top,new P.IntPoint2(o,i.Y),r.Top,this.m_UseFullRange)&&(i=this.AddOutPt(t,i),this.AddJoin(n,i,r.Top))}return n},P.Clipper.prototype.AddOutPt=function(t,e){if(0>t.OutIdx){var i=this.CreateOutRec();i.IsOpen=0===t.WindDelta;var n=new P.OutPt;i.Pts=n,n.Idx=i.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,P.use_xyz&&(n.Pt.Z=e.Z),n.Next=n,n.Prev=n,i.IsOpen||this.SetHoleState(t,i),t.OutIdx=i.Idx}else{var r=(i=this.m_PolyOuts[t.OutIdx]).Pts,o=t.Side===P.EdgeSide.esLeft;if(o&&P.IntPoint.op_Equality(e,r.Pt))return r;if(!o&&P.IntPoint.op_Equality(e,r.Prev.Pt))return r.Prev;(n=new P.OutPt).Idx=i.Idx,n.Pt.X=e.X,n.Pt.Y=e.Y,P.use_xyz&&(n.Pt.Z=e.Z),n.Next=r,n.Prev=r.Prev,n.Prev.Next=n,r.Prev=n,o&&(i.Pts=n)}return n},P.Clipper.prototype.GetLastOutPt=function(t){var e=this.m_PolyOuts[t.OutIdx];return t.Side===P.EdgeSide.esLeft?e.Pts:e.Pts.Prev},P.Clipper.prototype.SwapPoints=function(t,e){var i=new P.IntPoint1(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,P.use_xyz&&(t.Value.Z=e.Value.Z),e.Value.X=i.X,e.Value.Y=i.Y,P.use_xyz&&(e.Value.Z=i.Z)},P.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){if(t>e){var r=t;t=e,e=r}return i>n&&(r=i,i=n,n=r),t<n&&i<e},P.Clipper.prototype.SetHoleState=function(t,e){for(var i=t.PrevInAEL,n=null;null!==i;)0<=i.OutIdx&&0!==i.WindDelta&&(null===n?n=i:n.OutIdx===i.OutIdx&&(n=null)),i=i.PrevInAEL;null===n?(e.FirstLeft=null,e.IsHole=!1):(e.FirstLeft=this.m_PolyOuts[n.OutIdx],e.IsHole=!e.FirstLeft.IsHole)},P.Clipper.prototype.GetDx=function(t,e){return t.Y===e.Y?P.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},P.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;P.IntPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Prev;var n=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;P.IntPoint.op_Equality(i.Pt,t.Pt)&&i!==t;)i=i.Next;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;P.IntPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Prev;var o=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;P.IntPoint.op_Equality(i.Pt,e.Pt)&&i!==e;)i=i.Next;return Math.max(n,r)===Math.max(o,i=Math.abs(this.GetDx(e.Pt,i.Pt)))&&Math.min(n,r)===Math.min(o,i)?0<this.Area(t):n>=o&&n>=i||r>=o&&r>=i},P.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!==t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y===t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!==t&&i.Prev!==t&&(e=i)),i=i.Next;if(null!==e)for(;e!==i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;P.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},P.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X?e:i.Next===i?e:n.Next===n?t:this.FirstIsBottomPt(i,n)?t:e},P.Clipper.prototype.OutRec1RightOfOutRec2=function(t,e){do if((t=t.FirstLeft)===e)return!0;while(null!==t)return!1},P.Clipper.prototype.GetOutRec=function(t){for(t=this.m_PolyOuts[t];t!==this.m_PolyOuts[t.Idx];)t=this.m_PolyOuts[t.Idx];return t},P.Clipper.prototype.AppendPolygon=function(t,e){var i=this.m_PolyOuts[t.OutIdx],n=this.m_PolyOuts[e.OutIdx],r=this.OutRec1RightOfOutRec2(i,n)?n:this.OutRec1RightOfOutRec2(n,i)?i:this.GetLowermostRec(i,n),o=i.Pts,s=o.Prev,l=n.Pts,p=l.Prev;for(t.Side===P.EdgeSide.esLeft?e.Side===P.EdgeSide.esLeft?(this.ReversePolyPtLinks(l),l.Next=o,o.Prev=l,s.Next=p,p.Prev=s,i.Pts=p):(p.Next=o,o.Prev=p,l.Prev=s,s.Next=l,i.Pts=l):e.Side===P.EdgeSide.esRight?(this.ReversePolyPtLinks(l),s.Next=p,p.Prev=s,l.Next=o,o.Prev=l):(s.Next=l,l.Prev=s,o.Prev=p,p.Next=o),i.BottomPt=null,r===n&&(n.FirstLeft!==i&&(i.FirstLeft=n.FirstLeft),i.IsHole=n.IsHole),n.Pts=null,n.BottomPt=null,n.FirstLeft=i,r=t.OutIdx,o=e.OutIdx,t.OutIdx=-1,e.OutIdx=-1,s=this.m_ActiveEdges;null!==s;){if(s.OutIdx===o){s.OutIdx=r,s.Side=t.Side;break}s=s.NextInAEL}n.Idx=i.Idx},P.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e=t;do{var i=e.Next;e.Next=e.Prev,e=e.Prev=i}while(e!==t)}},P.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},P.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},P.Clipper.prototype.IntersectEdges=function(t,e,i){var n=0<=t.OutIdx,r=0<=e.OutIdx;if(P.use_xyz&&this.SetZ(i,t,e),P.use_lines&&(0===t.WindDelta||0===e.WindDelta))(0!==t.WindDelta||0!==e.WindDelta)&&(t.PolyTyp===e.PolyTyp&&t.WindDelta!==e.WindDelta&&this.m_ClipType===P.ClipType.ctUnion?0===t.WindDelta?r&&(this.AddOutPt(t,i),n&&(t.OutIdx=-1)):n&&(this.AddOutPt(e,i),r&&(e.OutIdx=-1)):t.PolyTyp!==e.PolyTyp&&(0!==t.WindDelta||1!==Math.abs(e.WindCnt)||this.m_ClipType===P.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!==Math.abs(t.WindCnt)||this.m_ClipType===P.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),r&&(e.OutIdx=-1)):(this.AddOutPt(t,i),n&&(t.OutIdx=-1))));else{if(t.PolyTyp===e.PolyTyp){if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=o}else t.WindCnt=0===t.WindCnt+e.WindDelta?-t.WindCnt:t.WindCnt+e.WindDelta,e.WindCnt=0==e.WindCnt-t.WindDelta?-e.WindCnt:e.WindCnt-t.WindDelta}else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;if(t.PolyTyp===P.PolyType.ptSubject)var s=this.m_SubjFillType,l=this.m_ClipFillType;else s=this.m_ClipFillType,l=this.m_SubjFillType;if(e.PolyTyp===P.PolyType.ptSubject){var p=this.m_SubjFillType;o=this.m_ClipFillType}else p=this.m_ClipFillType,o=this.m_SubjFillType;switch(s){case P.PolyFillType.pftPositive:s=t.WindCnt;break;case P.PolyFillType.pftNegative:s=-t.WindCnt;break;default:s=Math.abs(t.WindCnt)}switch(p){case P.PolyFillType.pftPositive:p=e.WindCnt;break;case P.PolyFillType.pftNegative:p=-e.WindCnt;break;default:p=Math.abs(e.WindCnt)}if(n&&r)0!==s&&1!==s||0!==p&&1!==p||t.PolyTyp!==e.PolyTyp&&this.m_ClipType!==P.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),P.Clipper.SwapSides(t,e),P.Clipper.SwapPolyIndexes(t,e));else if(n)(0===p||1===p)&&(this.AddOutPt(t,i),P.Clipper.SwapSides(t,e),P.Clipper.SwapPolyIndexes(t,e));else if(r)(0===s||1===s)&&(this.AddOutPt(e,i),P.Clipper.SwapSides(t,e),P.Clipper.SwapPolyIndexes(t,e));else if(!(0!==s&&1!==s||0!==p&&1!==p)){switch(l){case P.PolyFillType.pftPositive:n=t.WindCnt2;break;case P.PolyFillType.pftNegative:n=-t.WindCnt2;break;default:n=Math.abs(t.WindCnt2)}switch(o){case P.PolyFillType.pftPositive:r=e.WindCnt2;break;case P.PolyFillType.pftNegative:r=-e.WindCnt2;break;default:r=Math.abs(e.WindCnt2)}if(t.PolyTyp!==e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1===s&&1===p)switch(this.m_ClipType){case P.ClipType.ctIntersection:0<n&&0<r&&this.AddLocalMinPoly(t,e,i);break;case P.ClipType.ctUnion:0>=n&&0>=r&&this.AddLocalMinPoly(t,e,i);break;case P.ClipType.ctDifference:(t.PolyTyp===P.PolyType.ptClip&&0<n&&0<r||t.PolyTyp===P.PolyType.ptSubject&&0>=n&&0>=r)&&this.AddLocalMinPoly(t,e,i);break;case P.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else P.Clipper.SwapSides(t,e)}}},P.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;(null!==e||null!==i||t===this.m_SortedEdges)&&(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},P.Clipper.prototype.ProcessHorizontals=function(){for(var t={};this.PopEdgeFromSEL(t);)this.ProcessHorizontal(t.v)},P.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=P.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=P.Direction.dRightToLeft)},P.Clipper.prototype.ProcessHorizontal=function(t){var e,i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);var n=i.Dir,r=i.Left;i=i.Right;for(var o=0===t.WindDelta,s=t,l=null;null!==s.NextInLML&&P.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;null===s.NextInLML&&(l=this.GetMaximaPair(s));var p=this.m_Maxima;if(null!==p){if(n===P.Direction.dLeftToRight){for(;null!==p&&p.X<=t.Bot.X;)p=p.Next;null!==p&&p.X>=s.Top.X&&(p=null)}else{for(;null!==p.Next&&p.Next.X<t.Bot.X;)p=p.Next;p.X<=s.Top.X&&(p=null)}}for(var h=null;;){for(var u=t===s,a=this.GetNextInAEL(t,n);null!==a;){if(null!==p){if(n===P.Direction.dLeftToRight)for(;null!==p&&p.X<a.Curr.X;)0<=t.OutIdx&&!o&&this.AddOutPt(t,new P.IntPoint2(p.X,t.Bot.Y)),p=p.Next;else for(;null!==p&&p.X>a.Curr.X;)0<=t.OutIdx&&!o&&this.AddOutPt(t,new P.IntPoint2(p.X,t.Bot.Y)),p=p.Prev}if(n===P.Direction.dLeftToRight&&a.Curr.X>i||n===P.Direction.dRightToLeft&&a.Curr.X<r||a.Curr.X===t.Top.X&&null!==t.NextInLML&&a.Dx<t.NextInLML.Dx)break;if(0<=t.OutIdx&&!o){for(P.use_xyz&&(n===P.Direction.dLeftToRight?this.SetZ(a.Curr,t,a):this.SetZ(a.Curr,a,t)),h=this.AddOutPt(t,a.Curr),e=this.m_SortedEdges;null!==e;){if(0<=e.OutIdx&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,e.Bot.X,e.Top.X)){var f=this.GetLastOutPt(e);this.AddJoin(f,h,e.Top)}e=e.NextInSEL}this.AddGhostJoin(h,t.Bot)}if(a===l&&u){0<=t.OutIdx&&this.AddLocalMaxPoly(t,l,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(l);return}n===P.Direction.dLeftToRight?(f=new P.IntPoint2(a.Curr.X,t.Curr.Y),this.IntersectEdges(t,a,f)):(f=new P.IntPoint2(a.Curr.X,t.Curr.Y),this.IntersectEdges(a,t,f)),f=this.GetNextInAEL(a,n),this.SwapPositionsInAEL(t,a),a=f}if(null===t.NextInLML||!P.ClipperBase.IsHorizontal(t.NextInLML))break;0<=(t=this.UpdateEdgeIntoAEL(t)).OutIdx&&this.AddOutPt(t,t.Bot),i={Dir:n,Left:r,Right:i},this.GetHorzDirection(t,i),n=i.Dir,r=i.Left,i=i.Right}if(0<=t.OutIdx&&null===h){for(h=this.GetLastOutPt(t),e=this.m_SortedEdges;null!==e;)0<=e.OutIdx&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,e.Bot.X,e.Top.X)&&(f=this.GetLastOutPt(e),this.AddJoin(f,h,e.Top)),e=e.NextInSEL;this.AddGhostJoin(h,t.Top)}null!==t.NextInLML?0<=t.OutIdx?(h=this.AddOutPt(t,t.Top),0!==(t=this.UpdateEdgeIntoAEL(t)).WindDelta&&(n=t.PrevInAEL,f=t.NextInAEL,null!==n&&n.Curr.X===t.Bot.X&&n.Curr.Y===t.Bot.Y&&0===n.WindDelta&&0<=n.OutIdx&&n.Curr.Y>n.Top.Y&&P.ClipperBase.SlopesEqual3(t,n,this.m_UseFullRange)?(f=this.AddOutPt(n,t.Bot),this.AddJoin(h,f,t.Top)):null!==f&&f.Curr.X===t.Bot.X&&f.Curr.Y===t.Bot.Y&&0!==f.WindDelta&&0<=f.OutIdx&&f.Curr.Y>f.Top.Y&&P.ClipperBase.SlopesEqual3(t,f,this.m_UseFullRange)&&(f=this.AddOutPt(f,t.Bot),this.AddJoin(h,f,t.Top)))):this.UpdateEdgeIntoAEL(t):(0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t))},P.Clipper.prototype.GetNextInAEL=function(t,e){return e===P.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},P.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!==t&&t.Next.NextInLML!==t},P.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y===e&&null===t.NextInLML},P.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y===e&&null!==t.NextInLML},P.Clipper.prototype.GetMaximaPair=function(t){return P.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?t.Next:P.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML?t.Prev:null},P.Clipper.prototype.GetMaximaPairEx=function(t){return null!==(t=this.GetMaximaPair(t))&&t.OutIdx!==P.ClipperBase.Skip&&(t.NextInAEL!==t.PrevInAEL||P.ClipperBase.IsHorizontal(t))?t:null},P.Clipper.prototype.ProcessIntersections=function(t){if(null===this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0===this.m_IntersectList.length)return!0;if(!(1===this.m_IntersectList.length||this.FixupIntersectionOrder()))return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,P.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},P.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=P.Clipper.TopX(e,t),e=e.NextInAEL;for(var i=!0;i&&null!==this.m_SortedEdges;){for(i=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var n=e.NextInSEL,r=new P.IntPoint0;e.Curr.X>n.Curr.X?(this.IntersectPoint(e,n,r),r.Y<t&&(r=new P.IntPoint2(P.Clipper.TopX(e,t),t)),(i=new P.IntersectNode).Edge1=e,i.Edge2=n,i.Pt.X=r.X,i.Pt.Y=r.Y,P.use_xyz&&(i.Pt.Z=r.Z),this.m_IntersectList.push(i),this.SwapPositionsInSEL(e,n),i=!0):e=n}if(null!==e.PrevInSEL)e.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null}},P.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL===t.Edge2||t.Edge1.PrevInSEL===t.Edge2},P.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},P.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i===t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},P.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0},v=function(t){return 0>t?Math.ceil(t-.5):Math.round(t)},I=function(t){return 0>t?Math.ceil(t-.5):Math.floor(t+.5)},g=function(t){return 0>t?-Math.round(Math.abs(t)):Math.round(t)},C=function(t){return 0>t?-2147483648>(t-=.5)?Math.ceil(t):0|t:2147483647<(t+=.5)?Math.floor(t):0|t},P.Clipper.Round=y?v:c?g:x?C:I,P.Clipper.TopX=function(t,e){return e===t.Top.Y?t.Top.X:t.Bot.X+P.Clipper.Round(t.Dx*(e-t.Bot.Y))},P.Clipper.prototype.IntersectPoint=function(t,e,i){if(i.X=0,i.Y=0,t.Dx===e.Dx)i.Y=t.Curr.Y,i.X=P.Clipper.TopX(t,i.Y);else{if(0===t.Delta.X){if(i.X=t.Bot.X,P.ClipperBase.IsHorizontal(e))i.Y=e.Bot.Y;else{var n=e.Bot.Y-e.Bot.X/e.Dx;i.Y=P.Clipper.Round(i.X/e.Dx+n)}}else if(0===e.Delta.X){if(i.X=e.Bot.X,P.ClipperBase.IsHorizontal(t))i.Y=t.Bot.Y;else{var r=t.Bot.Y-t.Bot.X/t.Dx;i.Y=P.Clipper.Round(i.X/t.Dx+r)}}else{r=t.Bot.X-t.Bot.Y*t.Dx;var o=((n=e.Bot.X-e.Bot.Y*e.Dx)-r)/(t.Dx-e.Dx);i.Y=P.Clipper.Round(o),i.X=Math.abs(t.Dx)<Math.abs(e.Dx)?P.Clipper.Round(t.Dx*o+r):P.Clipper.Round(e.Dx*o+n)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=P.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,i.X=Math.abs(t.Dx)<Math.abs(e.Dx)?P.Clipper.TopX(t,i.Y):P.Clipper.TopX(e,i.Y)}i.Y>t.Curr.Y&&(i.Y=t.Curr.Y,i.X=Math.abs(t.Dx)>Math.abs(e.Dx)?P.Clipper.TopX(e,i.Y):P.Clipper.TopX(t,i.Y))}},P.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e,i,n=this.m_ActiveEdges;null!==n;)if((i=this.IsMaxima(n,t))&&(i=null===(i=this.GetMaximaPairEx(n))||!P.ClipperBase.IsHorizontal(i)),i)this.StrictlySimple&&this.InsertMaxima(n.Top.X),e=n.PrevInAEL,this.DoMaxima(n),n=null===e?this.m_ActiveEdges:e.NextInAEL;else{if(this.IsIntermediate(n,t)&&P.ClipperBase.IsHorizontal(n.NextInLML)?(0<=(n=this.UpdateEdgeIntoAEL(n)).OutIdx&&this.AddOutPt(n,n.Bot),this.AddEdgeToSEL(n)):(n.Curr.X=P.Clipper.TopX(n,t),n.Curr.Y=t),P.use_xyz&&(n.Curr.Z=n.Top.Y===t?n.Top.Z:n.Bot.Y===t?n.Bot.Z:0),this.StrictlySimple&&(e=n.PrevInAEL,0<=n.OutIdx&&0!==n.WindDelta&&null!==e&&0<=e.OutIdx&&e.Curr.X===n.Curr.X&&0!==e.WindDelta)){var r=new P.IntPoint1(n.Curr);P.use_xyz&&this.SetZ(r,e,n),i=this.AddOutPt(e,r),e=this.AddOutPt(n,r),this.AddJoin(i,e,r)}n=n.NextInAEL}for(this.ProcessHorizontals(),this.m_Maxima=null,n=this.m_ActiveEdges;null!==n;)this.IsIntermediate(n,t)&&(i=null,0<=n.OutIdx&&(i=this.AddOutPt(n,n.Top)),e=(n=this.UpdateEdgeIntoAEL(n)).PrevInAEL,r=n.NextInAEL,null!==e&&e.Curr.X===n.Bot.X&&e.Curr.Y===n.Bot.Y&&null!==i&&0<=e.OutIdx&&e.Curr.Y===e.Top.Y&&P.ClipperBase.SlopesEqual5(n.Curr,n.Top,e.Curr,e.Top,this.m_UseFullRange)&&0!==n.WindDelta&&0!==e.WindDelta?(e=this.AddOutPt(ePrev2,n.Bot),this.AddJoin(i,e,n.Top)):null!==r&&r.Curr.X===n.Bot.X&&r.Curr.Y===n.Bot.Y&&null!==i&&0<=r.OutIdx&&r.Curr.Y===r.Top.Y&&P.ClipperBase.SlopesEqual5(n.Curr,n.Top,r.Curr,r.Top,this.m_UseFullRange)&&0!==n.WindDelta&&0!==r.WindDelta&&(e=this.AddOutPt(r,n.Bot),this.AddJoin(i,e,n.Top))),n=n.NextInAEL},P.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPairEx(t);if(null===e)0<=t.OutIdx&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t);else{for(var i=t.NextInAEL;null!==i&&i!==e;)this.IntersectEdges(t,i,t.Top),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;-1===t.OutIdx&&-1===e.OutIdx?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):0<=t.OutIdx&&0<=e.OutIdx?(0<=t.OutIdx&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):P.use_lines&&0===t.WindDelta?(0<=t.OutIdx&&(this.AddOutPt(t,t.Top),t.OutIdx=P.ClipperBase.Unassigned),this.DeleteFromAEL(t),0<=e.OutIdx&&(this.AddOutPt(e,t.Top),e.OutIdx=P.ClipperBase.Unassigned),this.DeleteFromAEL(e)):P.Error("DoMaxima error")}},P.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},P.Clipper.Orientation=function(t){return 0<=P.Clipper.Area(t)},P.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do e++,i=i.Next;while(i!==t)return e},P.Clipper.prototype.BuildResult=function(t){P.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e];if(null!==n.Pts){n=n.Pts.Prev;var r=this.PointCount(n);if(!(2>r)){for(var o=Array(r),s=0;s<r;s++)o[s]=n.Pt,n=n.Prev;t.push(o)}}}},P.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e],r=this.PointCount(n.Pts);if(!(n.IsOpen&&2>r||!n.IsOpen&&3>r)){this.FixHoleLinkage(n);var o=new P.PolyNode;t.m_AllPolys.push(o),n.PolyNode=o,o.m_polygon.length=r,n=n.Pts.Prev;for(var s=0;s<r;s++)o.m_polygon[s]=n.Pt,n=n.Prev}}for(e=0,i=this.m_PolyOuts.length;e<i;e++)null!==(n=this.m_PolyOuts[e]).PolyNode&&(n.IsOpen?(n.PolyNode.IsOpen=!0,t.AddChild(n.PolyNode)):null!==n.FirstLeft&&null!==n.FirstLeft.PolyNode?n.FirstLeft.PolyNode.AddChild(n.PolyNode):t.AddChild(n.PolyNode))},P.Clipper.prototype.FixupOutPolyline=function(t){for(var e=t.Pts,i=e.Prev;e!==i;)if(e=e.Next,P.IntPoint.op_Equality(e.Pt,e.Prev.Pt)){e===i&&(i=e.Prev);var n=e.Prev;n.Next=e.Next,e=e.Next.Prev=n}e===e.Prev&&(t.Pts=null)},P.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts,n=this.PreserveCollinear||this.StrictlySimple;;){if(i.Prev===i||i.Prev===i.Next){t.Pts=null;return}if(P.IntPoint.op_Equality(i.Pt,i.Next.Pt)||P.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||P.ClipperBase.SlopesEqual4(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!n||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))e=null,i.Prev.Next=i.Next,i=i.Next.Prev=i.Prev;else if(i===e)break;else null===e&&(e=i),i=i.Next}t.Pts=i},P.Clipper.prototype.DupOutPt=function(t,e){var i=new P.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,P.use_xyz&&(i.Pt.Z=t.Pt.Z),i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},P.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},P.Clipper.prototype.JoinHorz=function(t,e,i,n,r,o){var s=t.Pt.X>e.Pt.X?P.Direction.dRightToLeft:P.Direction.dLeftToRight;if(s===(n=i.Pt.X>n.Pt.X?P.Direction.dRightToLeft:P.Direction.dLeftToRight))return!1;if(s===P.Direction.dLeftToRight){for(;t.Next.Pt.X<=r.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y===r.Y;)t=t.Next;o&&t.Pt.X!==r.X&&(t=t.Next),e=this.DupOutPt(t,!o),P.IntPoint.op_Inequality(e.Pt,r)&&((t=e).Pt.X=r.X,t.Pt.Y=r.Y,P.use_xyz&&(t.Pt.Z=r.Z),e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=r.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y===r.Y;)t=t.Next;o||t.Pt.X===r.X||(t=t.Next),e=this.DupOutPt(t,o),P.IntPoint.op_Inequality(e.Pt,r)&&((t=e).Pt.X=r.X,t.Pt.Y=r.Y,P.use_xyz&&(t.Pt.Z=r.Z),e=this.DupOutPt(t,o))}if(n===P.Direction.dLeftToRight){for(;i.Next.Pt.X<=r.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;o&&i.Pt.X!==r.X&&(i=i.Next),n=this.DupOutPt(i,!o),P.IntPoint.op_Inequality(n.Pt,r)&&((i=n).Pt.X=r.X,i.Pt.Y=r.Y,P.use_xyz&&(i.Pt.Z=r.Z),n=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=r.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y===r.Y;)i=i.Next;o||i.Pt.X===r.X||(i=i.Next),n=this.DupOutPt(i,o),P.IntPoint.op_Inequality(n.Pt,r)&&((i=n).Pt.X=r.X,i.Pt.Y=r.Y,P.use_xyz&&(i.Pt.Z=r.Z),n=this.DupOutPt(i,o))}return s===P.Direction.dLeftToRight===o?(t.Prev=i,i.Next=t,e.Next=n,n.Prev=e):(t.Next=i,i.Prev=t,e.Prev=n,n.Next=e),!0},P.Clipper.prototype.JoinPoints=function(t,e,i){var n,r=t.OutPt1;new P.OutPt;var o,s=t.OutPt2;if(new P.OutPt,(o=t.OutPt1.Pt.Y===t.OffPt.Y)&&P.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&P.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!==i)return!1;for(n=t.OutPt1.Next;n!==r&&P.IntPoint.op_Equality(n.Pt,t.OffPt);)n=n.Next;for(n=n.Pt.Y>t.OffPt.Y,o=t.OutPt2.Next;o!==s&&P.IntPoint.op_Equality(o.Pt,t.OffPt);)o=o.Next;return n!==o.Pt.Y>t.OffPt.Y&&(n?(n=this.DupOutPt(r,!1),o=this.DupOutPt(s,!0),r.Prev=s,s.Next=r,n.Next=o,o.Prev=n):(n=this.DupOutPt(r,!0),o=this.DupOutPt(s,!1),r.Next=s,s.Prev=r,n.Prev=o,o.Next=n),t.OutPt1=r,t.OutPt2=n,!0)}if(o){for(n=r;r.Prev.Pt.Y===r.Pt.Y&&r.Prev!==n&&r.Prev!==s;)r=r.Prev;for(;n.Next.Pt.Y===n.Pt.Y&&n.Next!==r&&n.Next!==s;)n=n.Next;if(n.Next===r||n.Next===s)return!1;for(o=s;s.Prev.Pt.Y===s.Pt.Y&&s.Prev!==o&&s.Prev!==n;)s=s.Prev;for(;o.Next.Pt.Y===o.Pt.Y&&o.Next!==s&&o.Next!==r;)o=o.Next;if(o.Next===s||o.Next===r||(i={Left:null,Right:null},!this.GetOverlap(r.Pt.X,n.Pt.X,s.Pt.X,o.Pt.X,i)))return!1;e=i.Left;var l=i.Right;return i=new P.IntPoint0,r.Pt.X>=e&&r.Pt.X<=l?(i.X=r.Pt.X,i.Y=r.Pt.Y,P.use_xyz&&(i.Z=r.Pt.Z),e=r.Pt.X>n.Pt.X):s.Pt.X>=e&&s.Pt.X<=l?(i.X=s.Pt.X,i.Y=s.Pt.Y,P.use_xyz&&(i.Z=s.Pt.Z),e=s.Pt.X>o.Pt.X):n.Pt.X>=e&&n.Pt.X<=l?(i.X=n.Pt.X,i.Y=n.Pt.Y,P.use_xyz&&(i.Z=n.Pt.Z),e=n.Pt.X>r.Pt.X):(i.X=o.Pt.X,i.Y=o.Pt.Y,P.use_xyz&&(i.Z=o.Pt.Z),e=o.Pt.X>s.Pt.X),t.OutPt1=r,t.OutPt2=s,this.JoinHorz(r,n,s,o,i,e)}for(n=r.Next;P.IntPoint.op_Equality(n.Pt,r.Pt)&&n!==r;)n=n.Next;if(l=n.Pt.Y>r.Pt.Y||!P.ClipperBase.SlopesEqual4(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange)){for(n=r.Prev;P.IntPoint.op_Equality(n.Pt,r.Pt)&&n!==r;)n=n.Prev;if(n.Pt.Y>r.Pt.Y||!P.ClipperBase.SlopesEqual4(r.Pt,n.Pt,t.OffPt,this.m_UseFullRange))return!1}for(o=s.Next;P.IntPoint.op_Equality(o.Pt,s.Pt)&&o!==s;)o=o.Next;var p=o.Pt.Y>s.Pt.Y||!P.ClipperBase.SlopesEqual4(s.Pt,o.Pt,t.OffPt,this.m_UseFullRange);if(p){for(o=s.Prev;P.IntPoint.op_Equality(o.Pt,s.Pt)&&o!==s;)o=o.Prev;if(o.Pt.Y>s.Pt.Y||!P.ClipperBase.SlopesEqual4(s.Pt,o.Pt,t.OffPt,this.m_UseFullRange))return!1}return n!==r&&o!==s&&n!==o&&(e!==i||l!==p)&&(l?(n=this.DupOutPt(r,!1),o=this.DupOutPt(s,!0),r.Prev=s,s.Next=r,n.Next=o,o.Prev=n):(n=this.DupOutPt(r,!0),o=this.DupOutPt(s,!1),r.Next=s,s.Prev=r,n.Prev=o,o.Next=n),t.OutPt1=r,t.OutPt2=n,!0)},P.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0===t[e].length;)e++;if(e===i)return new P.IntRect(0,0,0,0);var n=new P.IntRect;for(n.left=t[e][0].X,n.right=n.left,n.top=t[e][0].Y,n.bottom=n.top;e<i;e++)for(var r=0,o=t[e].length;r<o;r++)t[e][r].X<n.left?n.left=t[e][r].X:t[e][r].X>n.right&&(n.right=t[e][r].X),t[e][r].Y<n.top?n.top=t[e][r].Y:t[e][r].Y>n.bottom&&(n.bottom=t[e][r].Y);return n},P.Clipper.prototype.GetBounds2=function(t){var e=t,i=new P.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!==e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},P.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(3>n)return 0;for(var r=e[0],o=1;o<=n;++o){var s=o===n?e[0]:e[o];if(s.Y===t.Y&&(s.X===t.X||r.Y===t.Y&&s.X>t.X==r.X<t.X))return -1;if(r.Y<t.Y!=s.Y<t.Y){if(r.X>=t.X){if(s.X>t.X)i=1-i;else{var l=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y);if(0===l)return -1;0<l==s.Y>r.Y&&(i=1-i)}}else if(s.X>t.X){if(0==(l=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y)))return -1;0<l==s.Y>r.Y&&(i=1-i)}}r=s}return i},P.Clipper.prototype.PointInPolygon=function(t,e){var i=0,n=e,r=t.X,o=t.Y,s=e.Pt.X,l=e.Pt.Y;do{var p=(e=e.Next).Pt.X,h=e.Pt.Y;if(h===o&&(p===r||l===o&&p>r==s<r))return -1;if(l<o!=h<o){if(s>=r){if(p>r)i=1-i;else{if(0==(s=(s-r)*(h-o)-(p-r)*(l-o)))return -1;0<s==h>l&&(i=1-i)}}else if(p>r){if(0==(s=(s-r)*(h-o)-(p-r)*(l-o)))return -1;0<s==h>l&&(i=1-i)}}s=p,l=h}while(n!==e)return i},P.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(0<=n)return 0<n;i=i.Next}while(i!==t)return!0},P.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i,n,r=0,o=this.m_PolyOuts.length;r<o;r++)i=this.m_PolyOuts[r],n=P.Clipper.ParseFirstLeft(i.FirstLeft),null!==i.Pts&&n===t&&this.Poly2ContainsPoly1(i.Pts,e.Pts)&&(i.FirstLeft=e)},P.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i,n,r=e.FirstLeft,o=0,s=this.m_PolyOuts.length;o<s;o++)null!==(i=this.m_PolyOuts[o]).Pts&&i!==e&&i!==t&&((n=P.Clipper.ParseFirstLeft(i.FirstLeft))===r||n===t||n===e)&&(this.Poly2ContainsPoly1(i.Pts,t.Pts)?i.FirstLeft=t:this.Poly2ContainsPoly1(i.Pts,e.Pts)?i.FirstLeft=e:(i.FirstLeft===t||i.FirstLeft===e)&&(i.FirstLeft=r))},P.Clipper.prototype.FixupFirstLefts3=function(t,e){for(var i,n,r=0,o=this.m_PolyOuts.length;r<o;r++)i=this.m_PolyOuts[r],n=P.Clipper.ParseFirstLeft(i.FirstLeft),null!==i.Pts&&n===t&&(i.FirstLeft=e)},P.Clipper.ParseFirstLeft=function(t){for(;null!==t&&null===t.Pts;)t=t.FirstLeft;return t},P.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i=this.m_Joins[t],n=this.GetOutRec(i.OutPt1.Idx),r=this.GetOutRec(i.OutPt2.Idx);if(null!==n.Pts&&null!==r.Pts&&!n.IsOpen&&!r.IsOpen){var o=n===r?n:this.OutRec1RightOfOutRec2(n,r)?r:this.OutRec1RightOfOutRec2(r,n)?n:this.GetLowermostRec(n,r);this.JoinPoints(i,n,r)&&(n===r?(n.Pts=i.OutPt1,n.BottomPt=null,(r=this.CreateOutRec()).Pts=i.OutPt2,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,n.Pts)?(r.IsHole=!n.IsHole,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==0<this.Area$1(r)&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(n.Pts,r.Pts)?(r.IsHole=n.IsHole,n.IsHole=!r.IsHole,r.FirstLeft=n.FirstLeft,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==0<this.Area$1(n)&&this.ReversePolyPtLinks(n.Pts)):(r.IsHole=n.IsHole,r.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,r))):(r.Pts=null,r.BottomPt=null,r.Idx=n.Idx,n.IsHole=o.IsHole,o===r&&(n.FirstLeft=r.FirstLeft),r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts3(r,n)))}}},P.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!==t.Pts)},P.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!==i&&!e.IsOpen)do{for(var n=i.Next;n!==e.Pts;){if(P.IntPoint.op_Equality(i.Pt,n.Pt)&&n.Next!==i&&n.Prev!==i){var r=i.Prev,o=n.Prev;i.Prev=o,o.Next=i,n.Prev=r,r.Next=n,e.Pts=i,(r=this.CreateOutRec()).Pts=n,this.UpdateOutPtIdxs(r),this.Poly2ContainsPoly1(r.Pts,e.Pts)?(r.IsHole=!e.IsHole,r.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,e)):this.Poly2ContainsPoly1(e.Pts,r.Pts)?(r.IsHole=e.IsHole,e.IsHole=!r.IsHole,r.FirstLeft=e.FirstLeft,e.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,r)):(r.IsHole=e.IsHole,r.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,r)),n=i}n=n.Next}i=i.Next}while(i!==e.Pts)}},P.Clipper.Area=function(t){if(!Array.isArray(t))return 0;var e=t.length;if(3>e)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return-(.5*i)},P.Clipper.prototype.Area=function(t){var e=t;if(null===t)return 0;var i=0;do i+=(t.Prev.Pt.X+t.Pt.X)*(t.Prev.Pt.Y-t.Pt.Y),t=t.Next;while(t!==e)return .5*i},P.Clipper.prototype.Area$1=function(t){return this.Area(t.Pts)},P.Clipper.SimplifyPolygon=function(t,e){var i=[],n=new P.Clipper(0);return n.StrictlySimple=!0,n.AddPath(t,P.PolyType.ptSubject,!0),n.Execute(P.ClipType.ctUnion,i,e,e),i},P.Clipper.SimplifyPolygons=function(t,e){void 0===e&&(e=P.PolyFillType.pftEvenOdd);var i=[],n=new P.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(t,P.PolyType.ptSubject,!0),n.Execute(P.ClipType.ctUnion,i,e,e),i},P.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},P.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y;return i=i.X-e.X,e=n*e.X+i*e.Y,(e=n*t.X+i*t.Y-e)*e/(n*n+i*i)},P.Clipper.SlopesNearCollinear=function(t,e,i,n){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<i.X?P.Clipper.DistanceFromLineSqrd(t,e,i)<n:e.X>t.X==e.X<i.X?P.Clipper.DistanceFromLineSqrd(e,t,i)<n:P.Clipper.DistanceFromLineSqrd(i,t,e)<n:t.Y>e.Y==t.Y<i.Y?P.Clipper.DistanceFromLineSqrd(t,e,i)<n:e.Y>t.Y==e.Y<i.Y?P.Clipper.DistanceFromLineSqrd(e,t,i)<n:P.Clipper.DistanceFromLineSqrd(i,t,e)<n},P.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X;return n*n+(t=t.Y-e.Y)*t<=i},P.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},P.Clipper.CleanPolygon=function(t,e){void 0===e&&(e=1.415);var i=t.length;if(0===i)return[];for(var n=Array(i),r=0;r<i;++r)n[r]=new P.OutPt;for(r=0;r<i;++r)n[r].Pt=t[r],n[r].Next=n[(r+1)%i],n[r].Next.Prev=n[r],n[r].Idx=0;for(r=e*e,n=n[0];0===n.Idx&&n.Next!==n.Prev;)P.Clipper.PointsAreClose(n.Pt,n.Prev.Pt,r)?(n=P.Clipper.ExcludeOp(n),i--):P.Clipper.PointsAreClose(n.Prev.Pt,n.Next.Pt,r)?(P.Clipper.ExcludeOp(n.Next),n=P.Clipper.ExcludeOp(n),i-=2):P.Clipper.SlopesNearCollinear(n.Prev.Pt,n.Pt,n.Next.Pt,r)?(n=P.Clipper.ExcludeOp(n),i--):(n.Idx=1,n=n.Next);3>i&&(i=0);var o=Array(i);for(r=0;r<i;++r)o[r]=new P.IntPoint1(n.Pt),n=n.Next;return o},P.Clipper.CleanPolygons=function(t,e){for(var i=Array(t.length),n=0,r=t.length;n<r;n++)i[n]=P.Clipper.CleanPolygon(t[n],e);return i},P.Clipper.Minkowski=function(t,e,i,n){n=n?1:0;var r=t.length,o=e.length,s=[];if(i)for(i=0;i<o;i++){for(var l=Array(r),p=0,h=t.length,u=t[p];p<h;u=t[++p])l[p]=new P.IntPoint2(e[i].X+u.X,e[i].Y+u.Y);s.push(l)}else for(i=0;i<o;i++){for(l=Array(r),p=0,h=t.length,u=t[p];p<h;u=t[++p])l[p]=new P.IntPoint2(e[i].X-u.X,e[i].Y-u.Y);s.push(l)}for(i=0,t=[];i<o-1+n;i++)for(p=0;p<r;p++)(e=[]).push(s[i%o][p%r]),e.push(s[(i+1)%o][p%r]),e.push(s[(i+1)%o][(p+1)%r]),e.push(s[i%o][(p+1)%r]),P.Clipper.Orientation(e)||e.reverse(),t.push(e);return t},P.Clipper.MinkowskiSum=function(t,e,i){if(e[0]instanceof Array){var n=e,r=new P.Paths;e=new P.Clipper;for(var o=0;o<n.length;++o){var s=P.Clipper.Minkowski(t,n[o],!0,i);e.AddPaths(s,P.PolyType.ptSubject,!0),i&&(s=P.Clipper.TranslatePath(n[o],t[0]),e.AddPath(s,P.PolyType.ptClip,!0))}return e.Execute(P.ClipType.ctUnion,r,P.PolyFillType.pftNonZero,P.PolyFillType.pftNonZero),r}return n=P.Clipper.Minkowski(t,e,!0,i),(e=new P.Clipper).AddPaths(n,P.PolyType.ptSubject,!0),e.Execute(P.ClipType.ctUnion,n,P.PolyFillType.pftNonZero,P.PolyFillType.pftNonZero),n},P.Clipper.TranslatePath=function(t,e){for(var i=new P.Path,n=0;n<t.length;n++)i.push(new P.IntPoint2(t[n].X+e.X,t[n].Y+e.Y));return i},P.Clipper.MinkowskiDiff=function(t,e){var i=P.Clipper.Minkowski(t,e,!1,!0),n=new P.Clipper;return n.AddPaths(i,P.PolyType.ptSubject,!0),n.Execute(P.ClipType.ctUnion,i,P.PolyFillType.pftNonZero,P.PolyFillType.pftNonZero),i},P.Clipper.PolyTreeToPaths=function(t){var e=[];return P.Clipper.AddPolyNodeToPaths(t,P.Clipper.NodeType.ntAny,e),e},P.Clipper.AddPolyNodeToPaths=function(t,e,i){var n=!0;switch(e){case P.Clipper.NodeType.ntOpen:return;case P.Clipper.NodeType.ntClosed:n=!t.IsOpen}0<t.m_polygon.length&&n&&i.push(t.m_polygon),n=0,t=t.Childs();for(var r=t.length,o=t[n];n<r;o=t[++n])P.Clipper.AddPolyNodeToPaths(o,e,i)},P.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new P.Paths,i=0,n=t.ChildCount();i<n;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},P.Clipper.ClosedPathsFromPolyTree=function(t){var e=new P.Paths;return P.Clipper.AddPolyNodeToPaths(t,P.Clipper.NodeType.ntClosed,e),e},m(P.Clipper,P.ClipperBase),P.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},P.ClipperOffset=function(t,e){void 0===t&&(t=2),void 0===e&&(e=P.ClipperOffset.def_arc_tolerance),this.m_destPolys=new P.Paths,this.m_srcPoly=new P.Path,this.m_destPoly=new P.Path,this.m_normals=[],this.m_StepsPerRad=this.m_miterLim=this.m_cos=this.m_sin=this.m_sinA=this.m_delta=0,this.m_lowest=new P.IntPoint0,this.m_polyNodes=new P.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},P.ClipperOffset.two_pi=6.28318530717959,P.ClipperOffset.def_arc_tolerance=.25,P.ClipperOffset.prototype.Clear=function(){P.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},P.ClipperOffset.Round=P.Clipper.Round,P.ClipperOffset.prototype.AddPath=function(t,e,i){var n=t.length-1;if(!(0>n)){var r=new P.PolyNode;if(r.m_jointype=e,r.m_endtype=i,i===P.EndType.etClosedLine||i===P.EndType.etClosedPolygon)for(;0<n&&P.IntPoint.op_Equality(t[0],t[n]);)n--;r.m_polygon.push(t[0]);var o=0;e=0;for(var s=1;s<=n;s++)P.IntPoint.op_Inequality(r.m_polygon[o],t[s])&&(o++,r.m_polygon.push(t[s]),t[s].Y>r.m_polygon[e].Y||t[s].Y===r.m_polygon[e].Y&&t[s].X<r.m_polygon[e].X)&&(e=o);!(i===P.EndType.etClosedPolygon&&2>o)&&(this.m_polyNodes.AddChild(r),i===P.EndType.etClosedPolygon)&&(0>this.m_lowest.X?this.m_lowest=new P.IntPoint2(this.m_polyNodes.ChildCount()-1,e):(t=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y],(r.m_polygon[e].Y>t.Y||r.m_polygon[e].Y===t.Y&&r.m_polygon[e].X<t.X)&&(this.m_lowest=new P.IntPoint2(this.m_polyNodes.ChildCount()-1,e))))}},P.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},P.ClipperOffset.prototype.FixOrientations=function(){if(0<=this.m_lowest.X&&!P.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype===P.EndType.etClosedPolygon||e.m_endtype===P.EndType.etClosedLine&&P.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(t=0;t<this.m_polyNodes.ChildCount();t++)(e=this.m_polyNodes.Childs()[t]).m_endtype!==P.EndType.etClosedLine||P.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()},P.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,n=e.Y-t.Y;if(0===i&&0===n)return new P.DoublePoint2(0,0);var r=1/Math.sqrt(i*i+n*n);return new P.DoublePoint2(n*r,-(i*r))},P.ClipperOffset.prototype.DoOffset=function(t){var e;if(this.m_destPolys=[],this.m_delta=t,P.ClipperBase.near_zero(t))for(var i=0;i<this.m_polyNodes.ChildCount();i++){var n=this.m_polyNodes.Childs()[i];n.m_endtype===P.EndType.etClosedPolygon&&this.m_destPolys.push(n.m_polygon)}else{this.m_miterLim=2<this.MiterLimit?2/(this.MiterLimit*this.MiterLimit):.5;var r=3.14159265358979/Math.acos(1-(0>=this.ArcTolerance?P.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*P.ClipperOffset.def_arc_tolerance?Math.abs(t)*P.ClipperOffset.def_arc_tolerance:this.ArcTolerance)/Math.abs(t));for(this.m_sin=Math.sin(P.ClipperOffset.two_pi/r),this.m_cos=Math.cos(P.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/P.ClipperOffset.two_pi,0>t&&(this.m_sin=-this.m_sin),i=0;i<this.m_polyNodes.ChildCount();i++){n=this.m_polyNodes.Childs()[i],this.m_srcPoly=n.m_polygon;var o=this.m_srcPoly.length;if(!(0===o||0>=t&&(3>o||n.m_endtype!==P.EndType.etClosedPolygon))){if(this.m_destPoly=[],1===o){if(n.m_jointype===P.JoinType.jtRound)for(o=1,n=0,e=1;e<=r;e++){this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[0].X+o*t),P.ClipperOffset.Round(this.m_srcPoly[0].Y+n*t)));var s=o;o=o*this.m_cos-this.m_sin*n,n=s*this.m_sin+n*this.m_cos}else for(n=o=-1,e=0;4>e;++e)this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[0].X+o*t),P.ClipperOffset.Round(this.m_srcPoly[0].Y+n*t))),0>o?o=1:0>n?n=1:o=-1}else{for(e=this.m_normals.length=0;e<o-1;e++)this.m_normals.push(P.ClipperOffset.GetUnitNormal(this.m_srcPoly[e],this.m_srcPoly[e+1]));if(n.m_endtype===P.EndType.etClosedLine||n.m_endtype===P.EndType.etClosedPolygon?this.m_normals.push(P.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new P.DoublePoint1(this.m_normals[o-2])),n.m_endtype===P.EndType.etClosedPolygon)for(s=o-1,e=0;e<o;e++)s=this.OffsetPoint(e,s,n.m_jointype);else if(n.m_endtype===P.EndType.etClosedLine){for(e=0,s=o-1;e<o;e++)s=this.OffsetPoint(e,s,n.m_jointype);for(this.m_destPolys.push(this.m_destPoly),this.m_destPoly=[],s=this.m_normals[o-1],e=o-1;0<e;e--)this.m_normals[e]=new P.DoublePoint2(-this.m_normals[e-1].X,-this.m_normals[e-1].Y);for(this.m_normals[0]=new P.DoublePoint2(-s.X,-s.Y),s=0,e=o-1;0<=e;e--)s=this.OffsetPoint(e,s,n.m_jointype)}else{for(e=1,s=0;e<o-1;++e)s=this.OffsetPoint(e,s,n.m_jointype);for(n.m_endtype===P.EndType.etOpenButt?(e=o-1,s=new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[e].X+this.m_normals[e].X*t),P.ClipperOffset.Round(this.m_srcPoly[e].Y+this.m_normals[e].Y*t)),this.m_destPoly.push(s),s=new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[e].X-this.m_normals[e].X*t),P.ClipperOffset.Round(this.m_srcPoly[e].Y-this.m_normals[e].Y*t)),this.m_destPoly.push(s)):(e=o-1,s=o-2,this.m_sinA=0,this.m_normals[e]=new P.DoublePoint2(-this.m_normals[e].X,-this.m_normals[e].Y),n.m_endtype===P.EndType.etOpenSquare?this.DoSquare(e,s):this.DoRound(e,s)),e=o-1;0<e;e--)this.m_normals[e]=new P.DoublePoint2(-this.m_normals[e-1].X,-this.m_normals[e-1].Y);for(this.m_normals[0]=new P.DoublePoint2(-this.m_normals[1].X,-this.m_normals[1].Y),e=(s=o-1)-1;0<e;--e)s=this.OffsetPoint(e,s,n.m_jointype);n.m_endtype===P.EndType.etOpenButt?(s=new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),P.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(s),s=new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),P.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(s)):(this.m_sinA=0,n.m_endtype===P.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1))}}this.m_destPolys.push(this.m_destPoly)}}}},P.ClipperOffset.prototype.Execute=function(){var t=arguments;if(t[0]instanceof P.PolyTree){var e=t[0],i=t[1];if(e.Clear(),this.FixOrientations(),this.DoOffset(i),(t=new P.Clipper(0)).AddPaths(this.m_destPolys,P.PolyType.ptSubject,!0),0<i)t.Execute(P.ClipType.ctUnion,e,P.PolyFillType.pftPositive,P.PolyFillType.pftPositive);else{var n=P.Clipper.GetBounds(this.m_destPolys);if((i=new P.Path).push(new P.IntPoint2(n.left-10,n.bottom+10)),i.push(new P.IntPoint2(n.right+10,n.bottom+10)),i.push(new P.IntPoint2(n.right+10,n.top-10)),i.push(new P.IntPoint2(n.left-10,n.top-10)),t.AddPath(i,P.PolyType.ptSubject,!0),t.ReverseSolution=!0,t.Execute(P.ClipType.ctUnion,e,P.PolyFillType.pftNegative,P.PolyFillType.pftNegative),1===e.ChildCount()&&0<e.Childs()[0].ChildCount())for(t=e.Childs()[0],e.Childs()[0]=t.Childs()[0],e.Childs()[0].m_Parent=e,i=1;i<t.ChildCount();i++)e.AddChild(t.Childs()[i]);else e.Clear()}}else e=t[0],i=t[1],P.Clear(e),this.FixOrientations(),this.DoOffset(i),(t=new P.Clipper(0)).AddPaths(this.m_destPolys,P.PolyType.ptSubject,!0),0<i?t.Execute(P.ClipType.ctUnion,e,P.PolyFillType.pftPositive,P.PolyFillType.pftPositive):(n=P.Clipper.GetBounds(this.m_destPolys),(i=new P.Path).push(new P.IntPoint2(n.left-10,n.bottom+10)),i.push(new P.IntPoint2(n.right+10,n.bottom+10)),i.push(new P.IntPoint2(n.right+10,n.top-10)),i.push(new P.IntPoint2(n.left-10,n.top-10)),t.AddPath(i,P.PolyType.ptSubject,!0),t.ReverseSolution=!0,t.Execute(P.ClipType.ctUnion,e,P.PolyFillType.pftNegative,P.PolyFillType.pftNegative),0<e.length&&e.splice(0,1))},P.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,1>Math.abs(this.m_sinA*this.m_delta)){if(0<this.m_normals[e].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[e].Y)return this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),P.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),e}else 1<this.m_sinA?this.m_sinA=1:-1>this.m_sinA&&(this.m_sinA=-1);if(0>this.m_sinA*this.m_delta)this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),P.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new P.IntPoint1(this.m_srcPoly[t])),this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),P.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case P.JoinType.jtMiter:(i=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y))>=this.m_miterLim?this.DoMiter(t,e,i):this.DoSquare(t,e);break;case P.JoinType.jtSquare:this.DoSquare(t,e);break;case P.JoinType.jtRound:this.DoRound(t,e)}return t},P.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),P.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),P.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},P.ClipperOffset.prototype.DoMiter=function(t,e,i){i=this.m_delta/i,this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*i),P.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*i)))},P.ClipperOffset.prototype.DoRound=function(t,e){for(var i,n=Math.max(P.Cast_Int32(P.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)))),1),r=this.m_normals[e].X,o=this.m_normals[e].Y,s=0;s<n;++s)this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+r*this.m_delta),P.ClipperOffset.Round(this.m_srcPoly[t].Y+o*this.m_delta))),i=r,r=r*this.m_cos-this.m_sin*o,o=i*this.m_sin+o*this.m_cos;this.m_destPoly.push(new P.IntPoint2(P.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),P.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},P.Error=function(t){try{throw Error(t)}catch(t){alert(t.message)}},P.JS={},P.JS.AreaOfPolygon=function(t,e){return e||(e=1),P.Clipper.Area(t)/(e*e)},P.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,n=0;n<t.length;n++)i+=P.Clipper.Area(t[n]);return i/(e*e)},P.JS.BoundsOfPath=function(t,e){return P.JS.BoundsOfPaths([t],e)},P.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=P.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},P.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array;if(t=P.JS.Clone(t),"number"!=typeof e||null===e)return P.Error("Delta is not a number in Clean()."),t;if(0===t.length||1===t.length&&0===t[0].length||0>e)return t;i||(t=[t]);for(var n,r,o,s,l,p,h,u=t.length,a=[],f=0;f<u;f++)if(0!==(n=(r=t[f]).length)){if(3>n)o=r,a.push(o);else{for(o=r,s=e*e,l=r[0],h=p=1;h<n;h++)(r[h].X-l.X)*(r[h].X-l.X)+(r[h].Y-l.Y)*(r[h].Y-l.Y)<=s||(o[p]=r[h],l=r[h],p++);l=r[p-1],(r[0].X-l.X)*(r[0].X-l.X)+(r[0].Y-l.Y)*(r[0].Y-l.Y)<=s&&p--,p<n&&o.splice(p,n-p),o.length&&a.push(o)}}return!i&&a.length?a=a[0]:i||0!==a.length?i&&0===a.length&&(a=[[]]):a=[],a},P.JS.Clone=function(t){if(!(t instanceof Array)||0===t.length)return[];if(1===t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r=t.length,o=Array(r);for(i=0;i<r;i++){var s=t[i].length,l=Array(s);for(n=0;n<s;n++)l[n]={X:t[i][n].X,Y:t[i][n].Y};o[i]=l}return e||(o=o[0]),o},P.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return P.Error("Tolerance is not a number in Lighten()."),P.JS.Clone(t);if(0===t.length||1===t.length&&0===t[0].length||0>e)return P.JS.Clone(t);var i=t[0]instanceof Array;i||(t=[t]);var n,r,o,s=t.length,l=e*e,p=[];for(n=0;n<s;n++){var h=t[n],u=h.length;if(0!==u){for(o=0;1e6>o;o++){var a=[];if(u=h.length,h[u-1].X!==h[0].X||h[u-1].Y!==h[0].Y){var f=1;h.push({X:h[0].X,Y:h[0].Y}),u=h.length}else f=0;var d=[];for(r=0;r<u-2;r++){var c=h[r],y=h[r+1],m=h[r+2],v=c.X,x=c.Y;c=m.X-v;var I=m.Y-x;if(0!==c||0!==I){var g=((y.X-v)*c+(y.Y-x)*I)/(c*c+I*I);1<g?(v=m.X,x=m.Y):0<g&&(v+=c*g,x+=I*g)}(m=(c=y.X-v)*c+(I=y.Y-x)*I)<=l&&(d[r+1]=1,r++)}for(a.push({X:h[0].X,Y:h[0].Y}),r=1;r<u-1;r++)d[r]||a.push({X:h[r].X,Y:h[r].Y});if(a.push({X:h[u-1].X,Y:h[u-1].Y}),f&&h.pop(),d.length)h=a;else break}u=a.length,a[u-1].X===a[0].X&&a[u-1].Y===a[0].Y&&a.pop(),2<a.length&&p.push(a)}}return i||(p=p[0]),void 0===p&&(p=[]),p},P.JS.PerimeterOfPath=function(t,e,i){if(void 0===t)return 0;var n=Math.sqrt,r=0,o=t.length;if(2>o)return 0;for(e&&(t[o]=t[0],o++);--o;){var s=t[o],l=s.X;s=s.Y;var p=t[o-1],h=p.X;r+=n((l-h)*(l-h)+(s-(p=p.Y))*(s-p))}return e&&t.pop(),r/i},P.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var n=0,r=0;r<t.length;r++)n+=P.JS.PerimeterOfPath(t[r],e,i);return n},P.JS.ScaleDownPath=function(t,e){var i;for(e||(e=1),i=t.length;i--;){var n=t[i];n.X/=e,n.Y/=e}},P.JS.ScaleDownPaths=function(t,e){var i,n;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;){var r=t[i][n];r.X/=e,r.Y/=e}},P.JS.ScaleUpPath=function(t,e){var i,n=Math.round;for(e||(e=1),i=t.length;i--;){var r=t[i];r.X=n(r.X*e),r.Y=n(r.Y*e)}},P.JS.ScaleUpPaths=function(t,e){var i,n,r=Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;){var o=t[i][n];o.X=r(o.X*e),o.Y=r(o.Y*e)}},P.ExPolygons=function(){return[]},P.ExPolygon=function(){this.holes=this.outer=null},P.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i,n,r=new P.ExPolygon;r.outer=t.Contour();var o=t.Childs(),s=o.length;for(i=0,r.holes=Array(s);i<s;i++){var l=o[i];r.holes[i]=l.Contour();var p=0,h=l.Childs();for(n=h.length;p<n;p++)l=h[p],P.JS.AddOuterPolyNodeToExPolygons(l,e)}e.push(r)},P.JS.ExPolygonsToPaths=function(t){var e,i,n=new P.Paths,r=0;for(e=t.length;r<e;r++){n.push(t[r].outer);var o=0;for(i=t[r].holes.length;o<i;o++)n.push(t[r].holes[o])}return n},P.JS.PolyTreeToExPolygons=function(t){var e,i=new P.ExPolygons,n=0,r=t.Childs();for(e=r.length;n<e;n++)t=r[n],P.JS.AddOuterPolyNodeToExPolygons(t,i);return i}}();let tk=(t,e)=>tA(function(t,e){if(t.length!==e.length)throw new l({expectedLength:t.length,givenLength:e.length});let i=[];for(let n=0;n<t.length;n++){let r=t[n],o=e[n];i.push(function t(e,i,n=!1){if("address"===e){if(!function(t,e){let{strict:i=!0}=(void 0)??{},n=`${t}.${i}`;if(tD.has(n))return tD.get(n);let r=!!tw.test(t)&&(t.toLowerCase()===t||!i||function(t,e){if(tB.has(`${t}.undefined`))return tB.get(`${t}.undefined`);let i=t.substring(2).toLowerCase(),n=tA(X(i),"bytes"),r=(e?i.substring(`${e}0x`.length):i).split("");for(let t=0;t<40;t+=2)n[t>>1]>>4>=8&&r[t]&&(r[t]=r[t].toUpperCase()),(15&n[t>>1])>=8&&r[t+1]&&(r[t+1]=r[t+1].toUpperCase());let o=`0x${r.join("")}`;return tB.set(`${t}.${e}`,o),o}(t)===t);return tD.set(n,r),r}(i))throw new u({address:i});return d(i.toLowerCase(),{size:n?32:null})}if("string"===e)return C(i);if("bytes"===e)return i;if("bool"===e)return d(v(i),{size:n?32:1});let r=e.match(tz);if(r){let[t,e,o="256"]=r,s=Number.parseInt(o)/8;return I(i,{size:n?32:s,signed:"int"===e})}let o=e.match(tF);if(o){let[t,e]=o;if(Number.parseInt(e)!==(i.length-2)/2)throw new p({expectedSize:Number.parseInt(e),givenSize:(i.length-2)/2});return d(i,{dir:"right",size:n?32:null})}let s=e.match(tR);if(s&&Array.isArray(i)){let[e,n]=s,r=[];for(let e=0;e<i.length;e++)r.push(t(n,i[e],!0));return 0===r.length?"0x":tM(r)}throw new h(e)}(r,o))}return tM(i)}(t,e));function tq(t,e,i){return parseInt(BigInt(i)%(BigInt(e)-BigInt(t)+1n)+BigInt(t))}let tH=parseInt(window.location.hash.substr(1).split("-")[0]),tZ=window.backgroundOffset||0;tH||(tH=Math.floor(150*Math.random())+1),console.log({tokenId:tH});let tU=tk(["uint256"],[tH]);if(1==tH&&"0xb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6"!==tU)throw Error("invalid token id should be 0xb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6");let t$=new class{constructor(t){this.useA=!1;let e=function(t){let e=parseInt(t.substr(0,8),16),i=parseInt(t.substr(8,8),16),n=parseInt(t.substr(16,8),16),r=parseInt(t.substr(24,8),16);return function(){e|=0,i|=0,n|=0,r|=0;let t=(e+i|0)+r|0;return r=r+1|0,e=i^i>>>9,i=n+(n<<3)|0,n=(n=n<<21|n>>>11)+t|0,(t>>>0)/4294967296}};this.prngA=new e(t.substr(2,32)),this.prngB=new e(t.substr(34,32));for(let t=0;t<1e6;t+=2)this.prngA(),this.prngB()}float(){return this.useA=!this.useA,this.useA?this.prngA():this.prngB()}int(t=0,e=1){return Math.round(t+this.float()*(e-t))}bell(t=1,e){let i=0,n=0;for(;0===i;)i=this.float();for(;0===n;)n=this.float();let r=Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*n);return(r=r/10+.5)>1||r<0?this.bell(e):(e&&(r>=0&&r<.5?r+=.5:r-=.5),Math.round(r*t))}}(tU),tj=window.innerWidth,tJ=window.innerHeight,tV=tj>=tJ?tj:tJ;var tG=t$.int(3,10),tK=parseInt(tV/tG),tQ=t$.int(100,500),t0=t$.int(2,300),t1=t$.int(2,300),t2=t$.int(0,360);let t3=0==tq(0,10,tU),t4=tk(["bytes32"],[tU]),t5=t3||0==tq(0,1,t4);t4=tk(["bytes32"],[t4]);let t6=t3||!t5||0==tq(0,1,t4),t8=0==tq(0,3,t4=tk(["bytes32"],[t4])),t7=0==tq(0,10,t4=tk(["bytes32"],[t4])),t9=0==tq(0,2,t4=tk(["bytes32"],[t4])),et=0==tq(0,1,t4=tk(["bytes32"],[t4])),ee=t$.int(5,10),ei=t$.int(1,3),en=t$.int(0,2),er=t$.int(4,50),eo={x:t$.int(tK,tj-2*tK),y:t$.int(tK,tJ-2*tK)},es=function(){let t=[];for(let e=0;e<1e3;e++){let e=new ep;t.push(e)}return t}(),el=function(){let t=[];for(let e=0;e<1;e++){let e=new eh;e.createRn(),t.push(e)}return t}();function ep(){this.x=0,this.y=0,this.w=0,this.h=0,this.xR=t$.float(),this.yR=t$.float(),this.wR=t$.float(),this.hR=t$.float(),this.getPath=function(){return this.marginize(),[[{X:this.x,Y:this.y},{X:this.x+this.w,Y:this.y},{X:this.x+this.w,Y:this.y+this.h},{X:this.x,Y:this.y+this.h}]]},this.setValue=function(t,e){this[t]=parseInt(e)},this.marginize=function(){this.x+this.w>tj&&(this.x=tj-this.w),this.x<0&&(this.x=0),this.y+this.h>tJ&&(this.y=tJ-this.h),this.y<0&&(this.y=0)}}function eh(){this.startX=t$.int(tK,tj-tK),this.startY=t$.int(tK,tJ-tK),this.polyLength=t$.int(400,1e3),this.stepVar=t$.int(100,1e3),this.rnArray=[],this.path,this.marginVar=t$.int(1,30),this.applyMargin=0!=t$.int(0,2),this.makePolygon=function(){this.path=[[]];let t=parseInt(this.startX),e=parseInt(this.startY);this.path[0].push({X:t,Y:e});let i=0!=Math.round(this.rnArray[0]);for(let n=0;n<this.polyLength;n++)i?(t+=-1*n+parseInt(2*this.rnArray[2*n]*n),e+=-1*n+parseInt(2*this.rnArray[2*n+1]*n)):(t+=-1*this.stepVar+this.rnArray[2*n]*this.stepVar*2,e+=-1*this.stepVar+this.rnArray[2*n+1]*this.stepVar*2),this.applyMargin&&(t=this.marginize(t,"w",n),e=this.marginize(e,"h",n)),this.path[0].push({X:t,Y:e});this.path[0].push({X:parseInt(this.startX),Y:parseInt(this.startY)})},this.createRn=function(){for(let t=0;t<2*this.polyLength;t++)this.rnArray.push(t$.float())},this.marginize=function(t,e,i){return"w"==e?t>tj-tK?t=tj-tK-this.marginVar+parseInt(this.rnArray[2*i]*this.marginVar*2):t<tK&&(t=tK-this.marginVar+parseInt(this.rnArray[2*i]*this.marginVar*2)):"h"==e&&(t>tJ-tK&&(t=tJ-tK-this.marginVar+parseInt(this.rnArray[2*i+1]*this.marginVar*2)),t<tK&&(t=tK-this.marginVar+parseInt(this.rnArray[2*i+1]*this.marginVar*2))),t},this.getPath=function(){return this.path}}function eu(t=!1){let i;console.log("renderSelections");let n=[[{X:-(tj/2*1),Y:tJ/2},{X:-(tj/2*1)+1,Y:tJ/2},{X:-(tj/2*1)+1,Y:tJ/2+1},{X:-(tj/2*1),Y:tJ/2+1}]];if(t5||t){let t=eo.x,e=eo.y;for(let r=0;r<tQ;r++)es[r].setValue("w",1+t0*es[r].wR),es[r].setValue("h",1+t1*es[r].hR),es[r].setValue("x",t),es[r].setValue("y",e),t+=100-parseInt(200*es[r].xR),e+=100-parseInt(200*es[r].yR),i=es[r].getPath(),n=ea(n,i=function(t,e){let i=[e[0][0].X,e[0][0].Y],n=ef(e[0][0].X,e[0][0].Y,e[0][1].X,e[0][1].Y,t),r=ef(e[0][0].X,e[0][0].Y,e[0][2].X,e[0][2].Y,t),o=ef(e[0][0].X,e[0][0].Y,e[0][3].X,e[0][3].Y,t);return[[{X:i[0],Y:i[1]},{X:n[0],Y:n[1]},{X:r[0],Y:r[1]},{X:o[0],Y:o[1]}]]}(et?t2:parseInt(360*es[r].wR),i),"union")}if(t6||t){let t=el[0];t.makePolygon(),i=t.getPath();let r=[/*@__PURE__*/e(tW).PolyFillType.pftNegative,/*@__PURE__*/e(tW).PolyFillType.pftPositive];n=ea(n,/*@__PURE__*/e(tW).Clipper.SimplifyPolygons(i,r[0]),"union")}if(t8||t){let t=tV/ee,e=[[]];for(let i=0;i<=tV/t;i++)for(let n=0;n<=tV/t;n++)e.push([{X:i*t+ei,Y:n*t+ei},{X:i*t+t-ei,Y:n*t+ei},{X:i*t+t-ei,Y:n*t+t-ei},{X:i*t+ei,Y:n*t+t-ei}]);n=ea(n,e,["difference","intersection","union"][en])}if(t7||t){let t=tj>=tJ?tj:tJ,e=t/ee;for(let i=0;i<=t/e;i++)for(let r=0;r<=t/e;r++)n=ea(n,[[{X:i*e,Y:r*e},{X:i+e,Y:r},{X:i+e,Y:r+e},{X:i,Y:r+e}]],"union")}if(t9||t){let t=[[]];for(let e=0;e<er;e+=2){let i=e*t$.int(2,20);t=ea([[{X:i+10,Y:i+10},{X:tj-i-10,Y:i+10},{X:tj-i-10,Y:tJ-i-10},{X:i+10,Y:tJ-i-10}],[{X:2*i+10,Y:2*i+10},{X:i+10,Y:i+10}]],[[{X:i+20,Y:i+20},{X:tj-i-20,Y:i+20},{X:tj-i-20,Y:tJ-i-20},{X:i+20,Y:tJ-i-20},{X:i+20,Y:i+20}]],"difference"),n=ea(n,t,"union")}}if(n=ea(n,i=[[{X:0,Y:0},{X:tj,Y:0},{X:tj,Y:tJ},{X:0,Y:tJ}]],"intersection"),t3||t){let t=tj/2+es[0].wR*tK,e=tJ/2+es[0].hR*tK,r=(tj-t)/2,o=(tJ-e)/2;n=ea(n,i=[[{X:r,Y:o},{X:r+t,Y:o},{X:r+t,Y:o+e},{X:r,Y:o+e}]],"difference")}let r=function(t){let e="",i,n;for(i=0;i<t.length;i++){for(n=0;n<t[i].length;n++)n?e+="L":e+="M",e+=t[i][n].X/1+", "+t[i][n].Y/1;e+="Z"}return""==e&&(e="M0,0"),e}(n);"M0,0"!=r||t?"M0,0"==r?console.error(`empty path on token ID after setting treatAllAsTrue ${tH}`):document.querySelector("#selectionPath").setAttribute("d",r):eu(!0)}function ea(t,i,n){let r=new/*@__PURE__*/(e(tW)).Clipper;/*@__PURE__*/e(tW).JS.ScaleUpPaths(t,1),/*@__PURE__*/e(tW).JS.ScaleUpPaths(i,1),r.AddPaths(t,/*@__PURE__*/e(tW).PolyType.ptSubject,!0),r.AddPaths(i,/*@__PURE__*/e(tW).PolyType.ptClip,!0);let o=/*@__PURE__*/e(tW).PolyFillType.pftNonZero,s=/*@__PURE__*/e(tW).PolyFillType.pftNonZero,l=new/*@__PURE__*/(e(tW)).Paths;return n=n.charAt(0).toUpperCase()+n.slice(1),r.Execute(/*@__PURE__*/e(tW).ClipType["ct"+n],l,o,s),l}function ef(t,e,i,n,r){var o=Math.PI/180*r,s=Math.cos(o),l=Math.sin(o);return[s*(i-t)+l*(n-e)+t,s*(n-e)-l*(i-t)+e]}function ed(t){let e,i,n;let r=["rgb(123,50,50)","rgb(50,123,50)","rgb(50,50,123)"][tq(0,2,t)],o=0==tq(0,10,t=tk(["bytes32"],[t])),s=0==tq(0,5,t=tk(["bytes32"],[t])),l=tq(1,10,t=tk(["bytes32"],[t])),p=((l<=7?0:l<=8?1:l<=9?2:3)+tZ)%4;if(0==p){if(o)e="background-color: "+r;else if(s){i=tq(0,90,t=tk(["bytes32"],[t]));let n=tq(0,150,t=tk(["bytes32"],[t])),r=`rgb(${n},${n},${n})`,o=tq(150,255,t=tk(["bytes32"],[t])),s=`rgb(${o},${o},${o})`;e=`background: linear-gradient(${i}deg, ${r} 0%, ${s} 100%)`}else{i=tq(0,90,t=tk(["bytes32"],[t])),n=tq(100,150,t=tk(["bytes32"],[t]));let r=tq(50,n,t=tk(["bytes32"],[t])),o=tq(50,n,t=tk(["bytes32"],[t])),s=tq(50,n,t=tk(["bytes32"],[t])),l=`rgb(${r},${o},${s})`,p=0==tq(0,1,t=tk(["bytes32"],[t])),h=tq(0,100,t=tk(["bytes32"],[t]));p?(r=r+h>255?255:r+h,o=o+h>255?255:o+h,s=s+h>255?255:s+h):(r=r-h<0?0:r-h,o=o-h<0?0:o-h,s=s-h<0?0:s-h);let u=`rgb(${r},${o},${s})`;e=`background: linear-gradient(${i}deg, ${l} 0%, ${u} 100%)`}}else e=1==p?"background-color: white":2==p?"background-color: black":`background-image: linear-gradient(45deg, #cbcccb 25%, transparent 25%), linear-gradient(-45deg, #cbcccb 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #cbcccb 75%), linear-gradient(-45deg, transparent 75%, #cbcccb 75%);
        background-size: 8px 8px;
        background-position: 0 0, 0 4px, 4px -4px, -4px 0px;`;document.getElementsByTagName("svg")[0].style=e}function eP(){console.log("resizeEnded"),tj=window.innerWidth,tJ=window.innerHeight,tK=parseInt((tV=tj>=tJ?tj:tJ)/tG),eu()}window.onload=function(){console.log("init"),document.querySelector("svg").onclick=function(){tZ++,ed(tU)},ed(tU),eu()},window.onresize=function(){console.log("clearTimeout",t),clearTimeout(t),t=setTimeout(eP,500)}}();</script><script></script></head><body> <svg color="#000" style="background-color:#0000"><defs><pattern id="diagonalHatch" width="8" height="8" patternUnits="userSpaceOnUse"><rect width="8" height="8" fill="#fff"/><path d="m-2 2 4-4M0 8l8-8M6 10l4-4" style="stroke:#000;stroke-width:3px"/><animateTransform type="translate" from="0 0" to="8 8" begin="0" dur="2s" attributeType="xml" attributeName="patternTransform" repeatCount="indefinite"/></pattern></defs><path id="selectionPath" d="m-2 2 4-4M0 8l8-8M6 10l4-4" stroke="url(#diagonalHatch)" fill="none"/></svg> </body></html>